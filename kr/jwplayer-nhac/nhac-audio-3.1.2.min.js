/*!
 * Nhac Web plugin for JW7 v3.1.2 support Audio, remove Auto
 * Copyright 2017 Nhac.vn, Vega Corp
 * http://nhac.vn - 2017-08-22
 */
(function(r){r().registerPlugin("nhac","6.0",function(b,v,x){function r(){if(void 0==v.showAutoNext||v.showAutoNext){if(void 0==m){var a=q.getElementsByClassName("jw-icon-hd")[0];void 0!=a&&(m=document.createElement("div"),m.className="jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-auto-next jw-icon-auto-next-on",m.onclick=function(){"jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-auto-next jw-icon-auto-next-on"==m.className?(m.className="jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-auto-next jw-icon-auto-next-off",
"function"===typeof onPlayerAutoNextOff&&onPlayerAutoNextOff()):(m.className="jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-auto-next jw-icon-auto-next-on","function"===typeof onPlayerAutoNextOn&&onPlayerAutoNextOn())},a.parentNode.insertBefore(m,a))}void 0==t&&(a=q.getElementsByClassName("jw-icon-playback")[0],void 0!=a&&(t=document.createElement("div"),t.className="jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-nextsong",t.onclick=function(){"function"===typeof onPlayerAutoNext&&
onPlayerAutoNext()},a.parentNode.insertBefore(t,a.nextSibling)))}}function H(a){b.setCurrentCaptions(0)}function I(a){b.setCurrentCaptions(0);void 0==f&&(f=q.getElementsByClassName("jw-icon-hd")[0].getElementsByClassName("jw-option"));1==f.length&&(a=f[0],"128K"==a.innerHTML?F("320K (Login)",320):"128 kbps"==a.innerHTML&&F("320 kbps (Login)",320))}function F(a,h){var c=document.createElement("li");c.className="jw-text jw-option jw-item-1 jw-reset";c.innerHTML=a;c.onclick=function(){y=!0;"function"===
typeof onPlayerLoginVip&&onPlayerLoginVip(h)};var b=f[f.length-1];b.parentNode.insertBefore(c,b.nextSibling)}function J(a){y&&(y=!1,b.setCurrentQuality(0))}function K(){var a=g.clientWidth,h=Math.pow(a/400,.6),b=c.fontSize*h;d.style.maxWidth=a+"px";d.style.fontSize=Math.round(b)+"px";d.style.lineHeight=Math.round(1.4*b)+"px";d.style.position="relative";n.style.maxWidth=a+"px";n.style.fontSize=Math.round(b)+"px";n.style.lineHeight=Math.round(1.4*b)+"px";n.style.position="relative";n.style.display=
"inline-block";n.style.margin="0px";n.style.padding="0px";p.style.maxWidth=a+"px";p.style.fontSize=Math.round(b)+"px";p.style.lineHeight=Math.round(1.4*b)+"px";p.style.position="relative";p.style.display="inline-block";p.style.margin="14px 0";k.style.color="#40ff91";k.style.position="absolute";k.style.top="0px";k.style.left="0px";k.style.overflow="hidden";k.style.whiteSpace="nowrap";k.style.textShadow="-1px 0 black, 0 1px black, 1px 0 black, 0 -1px black";k.style.lineHeight=Math.round(1.4*b)+"px";
l.style.color="#40ff91";l.style.position="absolute";l.style.top="0px";l.style.left="0px";l.style.overflow="hidden";l.style.whiteSpace="nowrap";l.style.textShadow="-1px 0 black, 0 1px black, 1px 0 black, 0 -1px black";l.style.lineHeight=Math.round(1.4*b)+"px";c.windowOpacity&&(u.style.padding=Math.round(5*h)+"px",u.style.borderRadius=Math.round(5*h)+"px");g.style.visibility="visible"}function G(a,b,c){var h=a.text,d=b.text;b=/<br\s*[\/]?>/gi;var e=!1;h=(h||"").replace(b," ");d=d.replace(b," ");if(""!==
h&&""!==d&&(c?(h!=k.innerHTML&&(k.innerHTML=h,n.innerHTML=h),n.appendChild(k),e||""!==l.innerHTML||(e=!0,l.innerHTML=d,p.innerHTML=d)):p.appendChild(l),h.length)){setTimeout(K,16);var g=1,f=0;var A=1E3*(a.endTime-a.startTime)/50;var m=setInterval(function(){f=g/A*100;100<f&&(f=100);c?(!e&&g>A/3&&(e=!0,l.innerHTML=d,p.innerHTML=d,l.style.width="0%"),k.style.width=f+"%"):(!e&&g>A/3&&(e=!0,k.innerHTML=d,n.innerHTML=d,k.style.width="0%"),l.style.width=f+"%");g++;g>A+1&&(clearInterval(m),k.style.width=
"0%",l.style.width="0%")},50)}}function C(){for(var a=-1,b=0;b<e.length;b++)if(e[b].startTime<=D&&(b===e.length-1||e[b+1].startTime>=D)){a=b;break}if(-1===a)G("");else if(a!==w){w=a;var c=!0;0==(a+1)/2%2&&(c=!1);G(e[b],w<e.length-2?e[b+2]:e[b-2],c)}}function E(a){a=String(a).replace("#","");3===a.length&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);return"#"+a.substr(-6)}function B(a,b){var c="rgb",h=[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)];void 0!==b&&100!==b&&(c+=
"a",h.push(b/100));return c+"("+h.join(",")+")"}var m,t,q,f,c,e,g,u,d,n,k,p,l,w,y=!1;b.onReady(function(a){q=b.getContainer();x.style.position="absolute";x.style.top="40px";x.style.width="100%";x.style.overflow="hidden";void 0!=b.getConfig().tracks&&0<b.getConfig().tracks.length&&void 0!=b.getConfig().tracks[0].file&&b.setCurrentCaptions(1)});b.onBeforePlay(function(a){a=q.getElementsByClassName("jw-title-primary")[0];if(void 0!=a){var b=a.innerHTML;0>b.indexOf("<font")&&0<b.indexOf(" - ")&&(b=b.replace(" - ",
" - <font color='#c7c7c7'>"),a.innerHTML=b+"</font>")}r()});b.on("meta",function(a){if(null!=b.getConfig().captionsTrack&&0<b.getConfig().captionsTrack.cues.length){a=b.getConfig().captionsTrack.cues;w=-1;e=[{startTime:0,text:""}];for(var c=0;c<a.length;c++)e.push(a[c]),e.push({startTime:a[c].endTime,text:""});C()}});b.on("visualQuality",function(a){void 0==f&&(f=q.getElementsByClassName("jw-icon-hd")[0].getElementsByClassName("jw-option"));if("auto"==a.mode||"auto"==a.reason)a=a.level,console.log("hiddenAuto",
a,a.bitrate,a.index,a.label),b.setCurrentQuality(a.index);0<f.length&&(a=f[0],"Auto"==a.innerHTML&&(a.className="jw-hidden"))});if(void 0===v.showVIP||!1===v.showVIP)b.on("firstFrame",H);else b.on("firstFrame",I),b.on("levelsChanged",J);b.on("time",function(a){D=a.position;e&&C()});this.resize=function(a,b){};(function(){c=b.getCaptions();void 0==c.color&&(c.color="#FFFFFF");void 0==c.fontFamily&&(c.fontFamily="Roboto, Arial, sans-serif");void 0==c.fontStyle&&(c.fontStyle="normal");void 0==c.fontWeight&&
(c.fontWeight="normal");void 0==c.textDecoration&&(c.textDecoration="none");void 0==c.edgeStyle&&(c.edgeStyle="uniform");void 0==c.backgroundColor&&(c.backgroundColor="#000");void 0==c.windowColor&&(c.windowColor="#FFFFFF");17>c.fontSize&&(c.fontSize=17);var a=c.fontOpacity,e=c.windowOpacity,f=c.edgeStyle,m=c.backgroundColor,q,r=B(E(c.color),a),t=c.fontFamily,v=c.fontStyle,w=c.fontWeight,y=c.textDecoration,z;e&&(q=B(E(c.windowColor),e));a=B("#000000",a);"dropshadow"===f?z="0 2px 1px "+a:"raised"===
f?z="0 0 5px "+a+", 0 1px 5px "+a+", 0 2px 5px "+a:"depressed"===f?z="0 -2px 1px "+a:"uniform"===f&&(z="-2px 0 1px "+a+",2px 0 1px "+a+",0 -2px 1px "+a+",0 2px 1px "+a+",-1px 1px 1px "+a+",1px 1px 1px "+a+",1px -1px 1px "+a+",1px 1px 1px "+a);c.back&&B(E(m),c.backgroundOpacity);g=document.createElement("div");u=document.createElement("div");d=document.createElement("div");n=document.createElement("p");k=document.createElement("span");p=document.createElement("p");l=document.createElement("span");
d.appendChild(n);d.appendChild(document.createElement("br"));d.appendChild(p);g.style.display="block";g.style.height="auto";g.style.position="absolute";g.style.textAlign="center";g.style.width="100%";g.style.zIndex="1";u.style.display="inline-block";void 0!=q&&(u.style.backgroundColor=q);d.style.color=r;d.style.display="inline-block";d.style.fontFamily=t;d.style.fontStyle=v;d.style.fontWeight=w;d.style.textAlign="center";d.style.textDecoration=y;d.style.wordWrap="break-word";d.style.textShadow=z;
u.appendChild(d);g.appendChild(u);x.appendChild(g)})();var D=0;e&&C()})})(jwplayer);function setAutoNext(r){var b=jwplayer().getContainer();void 0!=b&&(b=b.getElementsByClassName("jw-icon-auto-next")[0],void 0!=b&&(b.className=r?"jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-auto-next jw-icon-auto-next-on":"jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-auto-next jw-icon-auto-next-off"))};
