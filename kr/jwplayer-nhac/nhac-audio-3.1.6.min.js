/*!
 * Nhac Web plugin for JW7 v3.1.6 support Audio, remove Auto, Karaoke
 * Copyright 2017 Nhac.vn, Vega Corp
 * http://nhac.vn - 2017-10-02
 */
(function(H){H().registerPlugin("nhac","6.0",function(h,x,D){function H(){if(void 0==x.showAutoNext||x.showAutoNext){if(void 0==B){var a=A.getElementsByClassName("jw-icon-hd")[0];void 0!=a&&(B=document.createElement("div"),B.className="jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-auto-next jw-icon-auto-next-on",B.onclick=function(){"jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-auto-next jw-icon-auto-next-on"==B.className?(B.className="jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-auto-next jw-icon-auto-next-off",
"function"===typeof onPlayerAutoNextOff&&onPlayerAutoNextOff()):(B.className="jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-auto-next jw-icon-auto-next-on","function"===typeof onPlayerAutoNextOn&&onPlayerAutoNextOn())},a.parentNode.insertBefore(B,a))}void 0==I&&(a=A.getElementsByClassName("jw-icon-playback")[0],void 0!=a&&(I=document.createElement("div"),I.className="jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-nextsong",I.onclick=function(){"function"===typeof onPlayerAutoNext&&
onPlayerAutoNext()},a.parentNode.insertBefore(I,a.nextSibling)))}}function V(){if(void 0==C){var a=A.getElementsByClassName("jw-icon-hd")[0];void 0!=a&&(C=document.createElement("div"),C.className="jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-lyric",C.onclick=function(){"jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-lyric"==C.className?(C.className="jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-lyric jw-toggle jw-off",q.style.visibility="hidden"):(C.className="jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-lyric",
q.style.visibility="visible")},a.parentNode.insertBefore(C,a.nextSibling))}}function L(a){if(!J)if(null!=h.getConfig().captionsTrack&&0<h.getConfig().captionsTrack.cues.length){J=!0;a=h.getConfig().captionsTrack.cues;var d=!1;if(2<a.length){var e=a[1].text.toLowerCase();if(0<=e.indexOf("s\u00e1ng t\u00e1c")||0<=e.indexOf("ca s\u0129")||0<=e.indexOf("tr\u00ecnh b\u00e0y")||0<=e.indexOf("th\u1ec3 hi\u1ec7n")||0<=e.indexOf("nh\u1ea1c s\u0129"))d=!0,a[0].startTime=0}if(x.resounded)for(var c=1;c<a.length+
1;c++){e=a[c-1].text;var b=(e.match(/([\s]+)/g)||[]).length+1,n=a[c-1].endTime-a[c-1].startTime,f=n/b,g=0,m="|";c<a.length&&(g=a[c].startTime-a[c-1].endTime);if(3>=c&&x.lyric_debug||0<=e.toLowerCase().indexOf("nhac.vn"))10>c?10>n?console.log("@@@ ",c,n.toFixed(2),"/",b,"=",f.toFixed(4),"|",g.toFixed(2),m,e):console.log("@@@ ",c,n.toFixed(1),"/",b,"=",f.toFixed(4),"|",g.toFixed(2),m,e):console.log("@@@",c,n.toFixed(2),"/",b,"=",f.toFixed(4),"|",g.toFixed(2),m,e);if(3<c&&0>e.toLowerCase().indexOf("nhac.vn")){var l=
a[c-1].startTime-a[c-2].endTime,p=a[c-2].startTime-a[c-3].endTime,t=(a[c-2].text.match(/([\s]+)/g)||[]).length+1,v=a[c-2].endTime-a[c-2].startTime,q=v/t,r=n-q*b,w=0;if(1<=r||.9<g)m="$";x.lyric_debug&&(10>c?10>n?console.log("@@@ ",c,n.toFixed(2),"/",b,"=",f.toFixed(4),"|",g.toFixed(2),m,e,"/",r.toFixed(3)):console.log("@@@ ",c,n.toFixed(1),"/",b,"=",f.toFixed(4),"|",g.toFixed(2),m,e,"/",r.toFixed(3)):console.log("@@@",c,n.toFixed(2),"/",b,"=",f.toFixed(4),"|",g.toFixed(2),m,e,"/",r.toFixed(3)));2.5<
r||.8<r&&1.199<=g&&.9899<=f?w=5:2<r||1.2<r&&1<f||1.1<g&&.9<f?w=4:1.5<r||1.1<r&&.7<f||1<g&&1.2<r?w=3:1.8<g&&.7<f||3.1<g&&.44<f&&0==l&&0==p||3.2<g&&.6<f&&0==l||10<g&&.5<f&&.1>l&&.1>p||20<g&&.48<f&&.2>l&&.2>p?w=4.9<g&&.7<f&&0==l?4:3:2.09<g&&.59<f||2.2<g&&.6<f||1.68<g&&.72<f||1.69<g&&.6<f&&.2>l||1.1<g&&.4<f&&.1>l||.5<g&&.7<f&&.1>l?w=.7<r?3:2:1.1<r||1<r&&.58<f||2<=g&&.8<f?w=2:1<r||2<=g&&.49<f?w=1:.5<r&&.79<f&&(x.lyric_debug&&(console.log("---",n.toFixed(3),"/",b,"=",f.toFixed(3),"|",g.toFixed(2)),console.log("---",
v.toFixed(3),"/",t,"=",q.toFixed(3)),console.log("---",q.toFixed(3),"*",b,"=",(q*b).toFixed(3),"/",n.toFixed(3),"-",(q*b).toFixed(3),"=",r.toFixed(3))),w=1);5==w?(n=e.substr(e.length-1),a[c-1].text+=n+n+"...."):4==w?a[c-1].text+="....":3==w?a[c-1].text+="...":2==w?a[c-1].text+="..":1==w&&(a[c-1].text+=",");x.lyric_debug&&0<w&&console.log(" ->",a[c-1].text,f,"|",g,w)}}y=-1;k=[{startTime:0,text:""}];c=a[0].startTime;!d&&""!=u&&2<c&&(d={},4<c?(d.text=N,d.startTime=0,d.endTime=a[0].startTime/2-.5,k.push(d),
k.push({startTime:a[0].startTime/2,text:""}),d={},d.text="Ca s\u0129: "+O,d.startTime=a[0].startTime/2):(d.text=N+" - "+O,d.startTime=0),d.endTime=a[0].startTime-.5,k.push(d),k.push({startTime:a[0].startTime,text:""}));for(c=0;c<a.length;c++)k.push(a[c]),k.push({startTime:a[c].endTime,text:""}),x.resounded&&c<a.length-1&&(n=a[c+1].startTime-a[c].endTime,10<n&&(d={},30<n?(d.text="5 4 3 2 1",d.startTime=a[c+1].startTime-2):20<n?(d.text="4 3 2 1",d.startTime=a[c+1].startTime-1.5):(d.text="3 2 1",d.startTime=
a[c+1].startTime-1),d.endTime=a[c+1].startTime-.5,k.push(d),k.push({startTime:a[c+1].startTime,text:""})));P();V();h.setCurrentCaptions(0)}else S(a)}function W(a){L("firstFrame2")}function X(a){void 0==z&&(z=A.getElementsByClassName("jw-icon-hd")[0].getElementsByClassName("jw-option"));1==z.length&&(a=z[0],"128K"==a.innerHTML?T("320K (Login)",320):"128 kbps"==a.innerHTML&&T("320 kbps (Login)",320));L("firstFrame")}function T(a,d){var e=document.createElement("li");e.className="jw-text jw-option jw-item-1 jw-reset";
e.innerHTML=a;e.onclick=function(){Q=!0;"function"===typeof onPlayerLoginVip&&onPlayerLoginVip(d)};var c=z[z.length-1];c.parentNode.insertBefore(e,c.nextSibling)}function S(a){h.getConfig();void 0!=h.getConfig().tracks&&0<h.getConfig().tracks.length&&void 0!=h.getConfig().tracks[0].file&&h.setCurrentCaptions(1)}function Y(){var a=q.clientWidth,d=Math.pow(a/420,.6),e=b.fontSize*d;p.style.maxWidth=a+"px";p.style.fontSize=Math.round(e)+"px";p.style.lineHeight=Math.round(1.4*e)+"px";p.style.position=
"relative";t.style.maxWidth=a+"px";t.style.fontSize=Math.round(e)+"px";t.style.lineHeight=Math.round(1.4*e)+"px";t.style.position="relative";t.style.display="inline-block";t.style.margin="0px";t.style.padding="0px";v.style.maxWidth=a+"px";v.style.fontSize=Math.round(e)+"px";v.style.lineHeight=Math.round(1.4*e)+"px";v.style.position="relative";v.style.display="inline-block";v.style.margin="14px 0";m.style.color="#40ff91";m.style.position="absolute";m.style.top="0px";m.style.left="0px";m.style.overflow=
"hidden";m.style.whiteSpace="nowrap";m.style.textShadow="-1px 0 black, 0 1px black, 1px 0 black, 0 -1px black";m.style.lineHeight=Math.round(1.4*e)+"px";l.style.color="#40ff91";l.style.position="absolute";l.style.top="0px";l.style.left="0px";l.style.overflow="hidden";l.style.whiteSpace="nowrap";l.style.textShadow="-1px 0 black, 0 1px black, 1px 0 black, 0 -1px black";l.style.lineHeight=Math.round(1.4*e)+"px";b.windowOpacity&&(E.style.padding=Math.round(5*d)+"px",E.style.borderRadius=Math.round(5*
d)+"px")}function U(a,d,e){var c=a.text,b=d.text;d=/<br\s*[\/]?>/gi;var n=!1;c=(c||"").replace(d," ");b=b.replace(d," ");if(""!==c&&""!==b&&(e?(c!=m.innerHTML&&(m.style.width="0%",m.innerHTML=c,t.innerHTML=c),n||""!==l.innerHTML&&!F&&J||(n=!0,l.style.width="0%",l.innerHTML=b,v.innerHTML=b),t.appendChild(m)):(F&&(m.innerHTML=b,t.innerHTML=b,l.innerHTML=c,v.innerHTML=c),v.appendChild(l)),c.length)){setTimeout(Y,16);var f=1,g=0;var p=Math.round(1E3*(a.endTime-a.startTime)/50);F&&(f=(G-a.startTime)*p/
(a.endTime-a.startTime));var q=setInterval(function(){if("paused"!=h.getState())if(g=f/p*100,100<g&&(g=100),G<a.startTime||Math.floor(G)>Math.ceil(a.endTime)||!J)clearInterval(q),y>=k.length-1&&(m.style.width="100%",l.style.width="100%",t.appendChild(m),v.appendChild(l));else if(e?(!n&&f>p/3&&y<k.length-2&&(n=!0,l.style.width="0%",l.innerHTML=b,v.innerHTML=b),m.style.width=g+"%"):(!n&&f>p/3&&y<k.length-2&&(n=!0,m.style.width="0%",m.innerHTML=b,t.innerHTML=b),l.style.width=g+"%"),f++,f>=p+1||F)clearInterval(q),
e?y<k.length-1&&(l.style.width="0%"):y<k.length-1&&(m.style.width="0%")},50)}}function P(){for(var a=-1,d=0;d<k.length;d++)if(k[d].startTime<=G&&(d===k.length-1||k[d+1].startTime>=G)){a=d;break}if(-1===a)U("");else if(a!==y){y=a;d=!0;0==(a+1)/2%2&&(d=!1);var b=y<k.length-2?k[a+2]:k[a-2];F&&""===k[a].text&&""===b.text&&(y=a=a<k.length-1?a+1:a-1,d=0==(a+1)/2%2?!1:!0,b=y<k.length-2?k[a+2]:k[a-2]);U(k[a],b,d)}}function R(a){a=String(a).replace("#","");3===a.length&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);return"#"+
a.substr(-6)}function M(a,b){var d="rgb",c=[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)];void 0!==b&&100!==b&&(d+="a",c.push(b/100));return d+"("+c.join(",")+")"}"undefined"!==typeof GoPerformance&&"function"===typeof GoPerformance&&GoPerformance(h,x,D);var B,I,C,A,z,b,k,q,E,p,t,m,v,l,y,F=!1,Q=!1,J=!1,u,N,O,K;h.onReady(function(a){A=h.getContainer();D.style.position="absolute";D.style.top="40px";D.style.width="100%";D.style.overflow="hidden";D.style.pointerEvents=
"none";S("onReady")});h.onBeforePlay(function(a){a=A.getElementsByClassName("jw-title-primary")[0];void 0!=a&&(u=a.innerHTML,0>u.indexOf("<font")&&0<u.indexOf(" - ")&&(N=u.split(" - ")[0],O=u.split(" - ")[1],u=u.replace(" - "," - <font color='#c7c7c7'>"),u+="</font>",a.innerHTML=u));H()});h.on("meta",function(a){L("onMeta")});h.on("levels",function(a){var b=A.getElementsByClassName("jw-icon-hd")[0];void 0!=b&&(K=b.className,"320k"==a.levels[a.currentQuality].label.toLowerCase()?b.className=K+" jw-icon-hd-320":
"128k"==a.levels[a.currentQuality].label.toLowerCase()&&(b.className=K+" jw-icon-hd-128"))});h.on("visualQuality",function(a){void 0==z&&(z=A.getElementsByClassName("jw-icon-hd")[0].getElementsByClassName("jw-option"));"auto"!=a.mode&&"auto"!=a.reason||h.setCurrentQuality(a.level.index);0<z.length&&(a=z[0],"Auto"==a.innerHTML&&(a.className="jw-hidden"))});if(void 0===x.showVIP||!1===x.showVIP)h.on("firstFrame",W);else h.on("firstFrame",X);h.on("levelsChanged",function(a){var b=h.getCurrentQuality(),
e=A.getElementsByClassName("jw-icon-hd")[0];"320k"==a.levels[b].label.toLowerCase()?e.className=K+" jw-icon-hd-320":"128k"==a.levels[b].label.toLowerCase()&&(e.className=K+" jw-icon-hd-128");Q&&(Q=!1,h.setCurrentQuality(0))});h.on("time",function(a){G=a.position;k&&P();J||(a=h.getConfig().playlistItem.tracks,void 0!=a&&0<a.length&&void 0!=a[0].file&&L("onTime"))});h.on("seek",function(a){F=!0;m.style.width="0%";l.style.width="0%"});h.on("seeked",function(a){F=!1});this.resize=function(a,b){};(function(){b=
h.getCaptions();void 0==b.color&&(b.color="#FFFFFF");void 0==b.fontFamily&&(b.fontFamily="Roboto, Arial, sans-serif");b.fontOpacity=100;void 0==b.fontStyle&&(b.fontStyle="normal");void 0==b.fontWeight&&(b.fontWeight="normal");void 0==b.textDecoration&&(b.textDecoration="none");void 0==b.edgeStyle&&(b.edgeStyle="uniform");void 0==b.backgroundColor&&(b.backgroundColor="#000");void 0==b.windowColor&&(b.windowColor="#FFFFFF");b.fontSize=17;var a=b.fontOpacity,d=b.windowOpacity,e=b.edgeStyle,c=b.backgroundColor,
k,n=M(R(b.color),a),f=b.fontFamily,g=b.fontStyle,x=b.fontWeight,y=b.textDecoration,u;d&&(k=M(R(b.windowColor),d));a=M("#000000",a);"dropshadow"===e?u="0 2px 1px "+a:"raised"===e?u="0 0 5px "+a+", 0 1px 5px "+a+", 0 2px 5px "+a:"depressed"===e?u="0 -2px 1px "+a:"uniform"===e&&(u="-2px 0 1px "+a+",2px 0 1px "+a+",0 -2px 1px "+a+",0 2px 1px "+a+",-1px 1px 1px "+a+",1px 1px 1px "+a+",1px -1px 1px "+a+",1px 1px 1px "+a);b.back&&M(R(c),b.backgroundOpacity);q=document.createElement("div");E=document.createElement("div");
p=document.createElement("div");t=document.createElement("p");m=document.createElement("span");v=document.createElement("p");l=document.createElement("span");p.appendChild(t);p.appendChild(document.createElement("br"));p.appendChild(v);q.style.display="block";q.style.height="auto";q.style.position="absolute";q.style.textAlign="center";q.style.width="100%";q.style.zIndex="1";E.style.display="inline-block";void 0!=k&&(E.style.backgroundColor=k);p.style.color=n;p.style.display="inline-block";p.style.fontFamily=
f;p.style.fontStyle=g;p.style.fontWeight=x;p.style.textAlign="center";p.style.textDecoration=y;p.style.wordWrap="break-word";p.style.textShadow=u;E.appendChild(p);q.appendChild(E);D.appendChild(q)})();var G=0;k&&P()})})(jwplayer);
function setAutoNext(H){var h=jwplayer().getContainer();void 0!=h&&(h=h.getElementsByClassName("jw-icon-auto-next")[0],void 0!=h&&(h.className=H?"jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-auto-next jw-icon-auto-next-on":"jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-auto-next jw-icon-auto-next-off"))};