/*!
 * Nhac Web plugin for JW7 v3.1.3 support Audio, remove Auto, Karaoke
 * Copyright 2017 Nhac.vn, Vega Corp
 * http://nhac.vn - 2017-09-20
 */
(function(B){B().registerPlugin("nhac","6.0",function(e,v,x){function B(){if(void 0==v.showAutoNext||v.showAutoNext){if(void 0==p){var a=w.getElementsByClassName("jw-icon-hd")[0];void 0!=a&&(p=document.createElement("div"),p.className="jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-auto-next jw-icon-auto-next-on",p.onclick=function(){"jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-auto-next jw-icon-auto-next-on"==p.className?(p.className="jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-auto-next jw-icon-auto-next-off",
"function"===typeof onPlayerAutoNextOff&&onPlayerAutoNextOff()):(p.className="jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-auto-next jw-icon-auto-next-on","function"===typeof onPlayerAutoNextOn&&onPlayerAutoNextOn())},a.parentNode.insertBefore(p,a))}void 0==C&&(a=w.getElementsByClassName("jw-icon-playback")[0],void 0!=a&&(C=document.createElement("div"),C.className="jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-nextsong",C.onclick=function(){"function"===typeof onPlayerAutoNext&&
onPlayerAutoNext()},a.parentNode.insertBefore(C,a.nextSibling)))}}function K(){if(void 0==u){var a=w.getElementsByClassName("jw-icon-hd")[0];void 0!=a&&(u=document.createElement("div"),u.className="jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-lyric",u.onclick=function(){"jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-lyric"==u.className?(u.className="jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-lyric jw-toggle jw-off",k.style.visibility="hidden"):(u.className="jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-lyric",
k.style.visibility="visible")},a.parentNode.insertBefore(u,a.nextSibling))}}function L(a){e.setCurrentCaptions(0)}function M(a){e.setCurrentCaptions(0);void 0==l&&(l=w.getElementsByClassName("jw-icon-hd")[0].getElementsByClassName("jw-option"));1==l.length&&(a=l[0],"128K"==a.innerHTML?I("320K (Login)",320):"128 kbps"==a.innerHTML&&I("320 kbps (Login)",320))}function I(a,c){var f=document.createElement("li");f.className="jw-text jw-option jw-item-1 jw-reset";f.innerHTML=a;f.onclick=function(){F=!0;
"function"===typeof onPlayerLoginVip&&onPlayerLoginVip(c)};var b=l[l.length-1];b.parentNode.insertBefore(f,b.nextSibling)}function N(a){F&&(F=!1,e.setCurrentQuality(0))}function O(){var a=k.clientWidth,c=Math.pow(a/420,.6),f=b.fontSize*c;d.style.maxWidth=a+"px";d.style.fontSize=Math.round(f)+"px";d.style.lineHeight=Math.round(1.4*f)+"px";d.style.position="relative";n.style.maxWidth=a+"px";n.style.fontSize=Math.round(f)+"px";n.style.lineHeight=Math.round(1.4*f)+"px";n.style.position="relative";n.style.display=
"inline-block";n.style.margin="0px";n.style.padding="0px";q.style.maxWidth=a+"px";q.style.fontSize=Math.round(f)+"px";q.style.lineHeight=Math.round(1.4*f)+"px";q.style.position="relative";q.style.display="inline-block";q.style.margin="14px 0";h.style.color="#40ff91";h.style.position="absolute";h.style.top="0px";h.style.left="0px";h.style.overflow="hidden";h.style.whiteSpace="nowrap";h.style.textShadow="-1px 0 black, 0 1px black, 1px 0 black, 0 -1px black";h.style.lineHeight=Math.round(1.4*f)+"px";
m.style.color="#40ff91";m.style.position="absolute";m.style.top="0px";m.style.left="0px";m.style.overflow="hidden";m.style.whiteSpace="nowrap";m.style.textShadow="-1px 0 black, 0 1px black, 1px 0 black, 0 -1px black";m.style.lineHeight=Math.round(1.4*f)+"px";b.windowOpacity&&(y.style.padding=Math.round(5*c)+"px",y.style.borderRadius=Math.round(5*c)+"px")}function J(a,c,f){var b=a.text,d=c.text;c=/<br\s*[\/]?>/gi;var k=!1;b=(b||"").replace(c," ");d=d.replace(c," ");if(""!==b&&""!==d&&(f?(b!=h.innerHTML&&
(h.style.width="0%",h.innerHTML=b,n.innerHTML=b),k||""!==m.innerHTML||(k=!0,m.style.width="0%",m.innerHTML=d,q.innerHTML=d),n.appendChild(h)):(r&&(h.innerHTML=d,n.innerHTML=d,m.innerHTML=b,q.innerHTML=b),q.appendChild(m)),b.length)){setTimeout(O,16);var z=1,l=0;var D=Math.round(1E3*(a.endTime-a.startTime)/50);r&&(z=(A-a.startTime)*D/(a.endTime-a.startTime));var p=setInterval(function(){if("paused"!=e.getState())if(l=z/D*100,100<l&&(l=100),A<a.startTime||Math.floor(A)>Math.ceil(a.endTime))clearInterval(p);
else if(f?(!k&&z>D/3&&t<g.length-2&&(k=!0,m.style.width="0%",m.innerHTML=d,q.innerHTML=d),h.style.width=l+"%"):(!k&&z>D/3&&t<g.length-2&&(k=!0,h.style.width="0%",h.innerHTML=d,n.innerHTML=d),m.style.width=l+"%"),z++,z>=D+1||r)clearInterval(p),f?t<g.length-1&&(m.style.width="0%"):t<g.length-1&&(h.style.width="0%")},50)}}function G(){for(var a=-1,c=0;c<g.length;c++)if(g[c].startTime<=A&&(c===g.length-1||g[c+1].startTime>=A)){a=c;break}if(-1===a)J("");else if(a!==t){t=a;c=!0;0==(a+1)/2%2&&(c=!1);var f=
t<g.length-2?g[a+2]:g[a-2];r&&""===g[a].text&&""===f.text&&(t=a=a<g.length-1?a+1:a-1,c=0==(a+1)/2%2?!1:!0,f=t<g.length-2?g[a+2]:g[a-2]);J(g[a],f,c)}}function H(a){a=String(a).replace("#","");3===a.length&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);return"#"+a.substr(-6)}function E(a,c){var f="rgb",b=[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)];void 0!==c&&100!==c&&(f+="a",b.push(c/100));return f+"("+b.join(",")+")"}"undefined"!==typeof GoPerformance&&"function"===typeof GoPerformance&&
GoPerformance(e,v,x);var p,C,u,w,l,b,g,k,y,d,n,h,q,m,t,r=!1,F=!1;e.onReady(function(a){w=e.getContainer();x.style.position="absolute";x.style.top="40px";x.style.width="100%";x.style.overflow="hidden";x.style.pointerEvents="none";void 0!=e.getConfig().tracks&&0<e.getConfig().tracks.length&&void 0!=e.getConfig().tracks[0].file&&e.setCurrentCaptions(1)});e.onBeforePlay(function(a){a=w.getElementsByClassName("jw-title-primary")[0];if(void 0!=a){var c=a.innerHTML;0>c.indexOf("<font")&&0<c.indexOf(" - ")&&
(c=c.replace(" - "," - <font color='#c7c7c7'>"),a.innerHTML=c+"</font>")}B()});e.on("meta",function(a){if(null!=e.getConfig().captionsTrack&&0<e.getConfig().captionsTrack.cues.length){a=e.getConfig().captionsTrack.cues;var c=0;if(2<a.length){var b=a[1].text.toLowerCase();console.log("populate",a.length,b,b.indexOf("ca s\u0129"),0==b.indexOf("ca s\u0129"),v.lyric_debug);if(0<=b.indexOf("s\u00e1ng t\u00e1c")||0<=b.indexOf("ca s\u0129"))c=2;a[0].startTime=0}if(v.resounded)for(c+=1;c<a.length;c++){b=
a[c-1].text;var d=(b.match(/([\s]+)/g)||[]).length+1,k=a[c-1].endTime-a[c-1].startTime,h=k/d,m=a[c].startTime-a[c-1].endTime;if(4<c){var l=a[c-1].startTime-a[c-2].endTime,n=a[c-2].startTime-a[c-3].endTime;.5<m&&.2>l&&.2>n?(1.2<m&&(b=b.substr(b.length-1),a[c-1].text+=b+b+"."),a[c-1].text+="..."):.9<h&&(h=(a[c-2].text.match(/([\s]+)/g)||[]).length+1,2.5<k-(a[c-2].endTime-a[c-2].startTime)/h*d&&(b=b.substr(b.length-1),a[c-1].text+=b+b+"."),a[c-1].text+="...")}}t=-1;g=[{startTime:0,text:""}];for(c=0;c<
a.length;c++)g.push(a[c]),g.push({startTime:a[c].endTime,text:""});G();K()}});e.on("visualQuality",function(a){void 0==l&&(l=w.getElementsByClassName("jw-icon-hd")[0].getElementsByClassName("jw-option"));if("auto"==a.mode||"auto"==a.reason)a=a.level,console.log("hiddenAuto",a,a.bitrate,a.index,a.label),e.setCurrentQuality(a.index);0<l.length&&(a=l[0],"Auto"==a.innerHTML&&(a.className="jw-hidden"))});if(void 0===v.showVIP||!1===v.showVIP)e.on("firstFrame",L);else e.on("firstFrame",M),e.on("levelsChanged",
N);e.on("time",function(a){A=a.position;g&&G()});e.on("seek",function(a){r=!0;h.style.width="0%";m.style.width="0%"});e.on("seeked",function(a){r=!1});this.resize=function(a,b){};(function(){b=e.getCaptions();void 0==b.color&&(b.color="#FFFFFF");void 0==b.fontFamily&&(b.fontFamily="Roboto, Arial, sans-serif");void 0==b.fontStyle&&(b.fontStyle="normal");void 0==b.fontWeight&&(b.fontWeight="normal");void 0==b.textDecoration&&(b.textDecoration="none");void 0==b.edgeStyle&&(b.edgeStyle="uniform");void 0==
b.backgroundColor&&(b.backgroundColor="#000");void 0==b.windowColor&&(b.windowColor="#FFFFFF");17>b.fontSize&&(b.fontSize=16);var a=b.fontOpacity,c=b.windowOpacity,f=b.edgeStyle,g=b.backgroundColor,l,p=E(H(b.color),a),t=b.fontFamily,u=b.fontStyle,v=b.fontWeight,w=b.textDecoration,r;c&&(l=E(H(b.windowColor),c));a=E("#000000",a);"dropshadow"===f?r="0 2px 1px "+a:"raised"===f?r="0 0 5px "+a+", 0 1px 5px "+a+", 0 2px 5px "+a:"depressed"===f?r="0 -2px 1px "+a:"uniform"===f&&(r="-2px 0 1px "+a+",2px 0 1px "+
a+",0 -2px 1px "+a+",0 2px 1px "+a+",-1px 1px 1px "+a+",1px 1px 1px "+a+",1px -1px 1px "+a+",1px 1px 1px "+a);b.back&&E(H(g),b.backgroundOpacity);k=document.createElement("div");y=document.createElement("div");d=document.createElement("div");n=document.createElement("p");h=document.createElement("span");q=document.createElement("p");m=document.createElement("span");d.appendChild(n);d.appendChild(document.createElement("br"));d.appendChild(q);k.style.display="block";k.style.height="auto";k.style.position=
"absolute";k.style.textAlign="center";k.style.width="100%";k.style.zIndex="1";y.style.display="inline-block";void 0!=l&&(y.style.backgroundColor=l);d.style.color=p;d.style.display="inline-block";d.style.fontFamily=t;d.style.fontStyle=u;d.style.fontWeight=v;d.style.textAlign="center";d.style.textDecoration=w;d.style.wordWrap="break-word";d.style.textShadow=r;y.appendChild(d);k.appendChild(y);x.appendChild(k)})();var A=0;g&&G()})})(jwplayer);
function setAutoNext(B){var e=jwplayer().getContainer();void 0!=e&&(e=e.getElementsByClassName("jw-icon-auto-next")[0],void 0!=e&&(e.className=B?"jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-auto-next jw-icon-auto-next-on":"jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-auto-next jw-icon-auto-next-off"))};