/*!
 * Nhac Web plugin for JW7 v3.1.5 support Audio, remove Auto, Karaoke
 * Copyright 2017 Nhac.vn, Vega Corp
 * http://nhac.vn - 2017-10-03
 */
(function(D){D().registerPlugin("nhac","6.0",function(f,p,z){function D(){if(void 0==p.showAutoNext||p.showAutoNext){if(void 0==x){var a=u.getElementsByClassName("jw-icon-hd")[0];void 0!=a&&(x=document.createElement("div"),x.className="jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-auto-next jw-icon-auto-next-on",x.onclick=function(){"jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-auto-next jw-icon-auto-next-on"==x.className?(x.className="jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-auto-next jw-icon-auto-next-off",
"function"===typeof onPlayerAutoNextOff&&onPlayerAutoNextOff()):(x.className="jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-auto-next jw-icon-auto-next-on","function"===typeof onPlayerAutoNextOn&&onPlayerAutoNextOn())},a.parentNode.insertBefore(x,a))}void 0==E&&(a=u.getElementsByClassName("jw-icon-playback")[0],void 0!=a&&(E=document.createElement("div"),E.className="jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-nextsong",E.onclick=function(){"function"===typeof onPlayerAutoNext&&
onPlayerAutoNext()},a.parentNode.insertBefore(E,a.nextSibling)))}}function R(){if(void 0==y){var a=u.getElementsByClassName("jw-icon-hd")[0];void 0!=a&&(y=document.createElement("div"),y.className="jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-lyric",y.onclick=function(){"jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-lyric"==y.className?(y.className="jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-lyric jw-toggle jw-off",n.style.visibility="hidden"):(y.className="jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-lyric",
n.style.visibility="visible")},a.parentNode.insertBefore(y,a.nextSibling))}}function H(a){if(!F)if(null!=f.getConfig().captionsTrack&&0<f.getConfig().captionsTrack.cues.length){F=!0;a=f.getConfig().captionsTrack.cues;var d=!1;if(2<a.length){var e=a[1].text.toLowerCase();if(0<=e.indexOf("s\u00e1ng t\u00e1c")||0<=e.indexOf("ca s\u0129")||0<=e.indexOf("tr\u00ecnh b\u00e0y")||0<=e.indexOf("th\u1ec3 hi\u1ec7n")||0<=e.indexOf("nh\u1ea1c s\u0129"))d=!0,a[0].startTime=0}if(p.resounded)for(var c=1;c<a.length;c++){e=
a[c-1].text;var b=(e.match(/([\s]+)/g)||[]).length+1,t=a[c-1].endTime-a[c-1].startTime,l=t/b,k=a[c].startTime-a[c-1].endTime;p.lyric_debug&&console.log("i@@@@@@@@",c,Math.round(100*t)/100,"/",b,"=",Math.round(100*l)/100,"|",Math.round(100*k)/100,e);if(4<c){var h=a[c-1].startTime-a[c-2].endTime,m=a[c-2].startTime-a[c-3].endTime;if(.5<k&&.2>h&&.2>m)1.2<k&&(t=e.substr(e.length-1),a[c-1].text+=t+t+"."),a[c-1].text+="...",p.lyric_debug&&console.log("i i-1 i-2",c,c-1,c-2,k,Math.round(100*h)/100,Math.round(100*
m)/100,.5<k,.2>h,.2>m);else if(.9<l){h=(a[c-2].text.match(/([\s]+)/g)||[]).length+1;m=a[c-2].endTime-a[c-2].startTime;var r=m/h;k=t-r*b;p.lyric_debug&&(console.log("diiiiiiii",Math.round(100*t)/100,"/",b,"=",Math.round(100*l)/100),console.log("diiiiiiii",Math.round(100*m)/100,"/",h,"=",Math.round(100*r)/100),console.log("diiiiiiii",c,Math.round(100*r)/100,"*",b,"=",Math.round(r*b*100)/100,"|",Math.round(100*t)/100,"--",Math.round(100*k)/100,e));2.5<k&&(t=e.substr(e.length-1),a[c-1].text+=t+t+".");
1.5<k&&(a[c-1].text+="...")}}}w=-1;g=[{startTime:0,text:""}];c=a[0].startTime;!d&&""!=q&&2<c&&(d={},4<c?(d.text=J,d.startTime=0,d.endTime=a[0].startTime/2-.5,g.push(d),g.push({startTime:a[0].startTime/2,text:""}),d={},d.text="Ca s\u0129: "+K,d.startTime=a[0].startTime/2):(d.text=J+" - "+K,d.startTime=0),d.endTime=a[0].startTime-.5,g.push(d),g.push({startTime:a[0].startTime,text:""}));for(c=0;c<a.length;c++)g.push(a[c]),g.push({startTime:a[c].endTime,text:""}),p.resounded&&c<a.length-1&&(t=a[c+1].startTime-
a[c].endTime,10<t&&(d={},30<t?(d.text="5 4 3 2 1",d.startTime=a[c+1].startTime-2):20<t?(d.text="4 3 2 1",d.startTime=a[c+1].startTime-1.5):(d.text="3 2 1",d.startTime=a[c+1].startTime-1),d.endTime=a[c+1].startTime-.5,g.push(d),g.push({startTime:a[c+1].startTime,text:""})));L();R()}else O(a)}function S(a){H("firstFrame2")}function T(a){void 0==v&&(v=u.getElementsByClassName("jw-icon-hd")[0].getElementsByClassName("jw-option"));1==v.length&&(a=v[0],"128K"==a.innerHTML?P("320K (Login)",320):"128 kbps"==
a.innerHTML&&P("320 kbps (Login)",320));H("firstFrame")}function P(a,d){var e=document.createElement("li");e.className="jw-text jw-option jw-item-1 jw-reset";e.innerHTML=a;e.onclick=function(){M=!0;"function"===typeof onPlayerLoginVip&&onPlayerLoginVip(d)};var c=v[v.length-1];c.parentNode.insertBefore(e,c.nextSibling)}function O(a){f.getConfig();void 0!=f.getConfig().tracks&&0<f.getConfig().tracks.length&&void 0!=f.getConfig().tracks[0].file&&f.setCurrentCaptions(1)}function U(){var a=n.clientWidth,
d=Math.pow(a/420,.6),e=b.fontSize*d;h.style.maxWidth=a+"px";h.style.fontSize=Math.round(e)+"px";h.style.lineHeight=Math.round(1.4*e)+"px";h.style.position="relative";m.style.maxWidth=a+"px";m.style.fontSize=Math.round(e)+"px";m.style.lineHeight=Math.round(1.4*e)+"px";m.style.position="relative";m.style.display="inline-block";m.style.margin="0px";m.style.padding="0px";r.style.maxWidth=a+"px";r.style.fontSize=Math.round(e)+"px";r.style.lineHeight=Math.round(1.4*e)+"px";r.style.position="relative";r.style.display=
"inline-block";r.style.margin="14px 0";l.style.color="#40ff91";l.style.position="absolute";l.style.top="0px";l.style.left="0px";l.style.overflow="hidden";l.style.whiteSpace="nowrap";l.style.textShadow="-1px 0 black, 0 1px black, 1px 0 black, 0 -1px black";l.style.lineHeight=Math.round(1.4*e)+"px";k.style.color="#40ff91";k.style.position="absolute";k.style.top="0px";k.style.left="0px";k.style.overflow="hidden";k.style.whiteSpace="nowrap";k.style.textShadow="-1px 0 black, 0 1px black, 1px 0 black, 0 -1px black";
k.style.lineHeight=Math.round(1.4*e)+"px";b.windowOpacity&&(A.style.padding=Math.round(5*d)+"px",A.style.borderRadius=Math.round(5*d)+"px")}function Q(a,d,e){var c=a.text,b=d.text;d=/<br\s*[\/]?>/gi;var h=!1;c=(c||"").replace(d," ");b=b.replace(d," ");if(""!==c&&""!==b&&(e?(c!=l.innerHTML&&(l.style.width="0%",l.innerHTML=c,m.innerHTML=c),h||""!==k.innerHTML&&!B&&F||(h=!0,k.style.width="0%",k.innerHTML=b,r.innerHTML=b),m.appendChild(l)):(B&&(l.innerHTML=b,m.innerHTML=b,k.innerHTML=c,r.innerHTML=c),
r.appendChild(k)),c.length)){setTimeout(U,16);var n=1,p=0;var q=Math.round(1E3*(a.endTime-a.startTime)/50);B&&(n=(C-a.startTime)*q/(a.endTime-a.startTime));var v=setInterval(function(){if("paused"!=f.getState())if(p=n/q*100,100<p&&(p=100),C<a.startTime||Math.floor(C)>Math.ceil(a.endTime)||!F)clearInterval(v),w>=g.length-1&&(l.style.width="100%",k.style.width="100%",m.appendChild(l),r.appendChild(k));else if(e?(!h&&n>q/3&&w<g.length-2&&(h=!0,k.style.width="0%",k.innerHTML=b,r.innerHTML=b),l.style.width=
p+"%"):(!h&&n>q/3&&w<g.length-2&&(h=!0,l.style.width="0%",l.innerHTML=b,m.innerHTML=b),k.style.width=p+"%"),n++,n>=q+1||B)clearInterval(v),e?w<g.length-1&&(k.style.width="0%"):w<g.length-1&&(l.style.width="0%")},50)}}function L(){for(var a=-1,d=0;d<g.length;d++)if(g[d].startTime<=C&&(d===g.length-1||g[d+1].startTime>=C)){a=d;break}if(-1===a)Q("");else if(a!==w){w=a;d=!0;0==(a+1)/2%2&&(d=!1);var b=w<g.length-2?g[a+2]:g[a-2];B&&""===g[a].text&&""===b.text&&(w=a=a<g.length-1?a+1:a-1,d=0==(a+1)/2%2?!1:
!0,b=w<g.length-2?g[a+2]:g[a-2]);Q(g[a],b,d)}}function N(a){a=String(a).replace("#","");3===a.length&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);return"#"+a.substr(-6)}function I(a,d){var b="rgb",c=[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)];void 0!==d&&100!==d&&(b+="a",c.push(d/100));return b+"("+c.join(",")+")"}"undefined"!==typeof GoPerformance&&"function"===typeof GoPerformance&&GoPerformance(f,p,z);var x,E,y,u,v,b,g,n,A,h,m,l,r,k,w,B=!1,M=!1,F=!1,q,J,K,G;f.onReady(function(a){u=
f.getContainer();z.style.position="absolute";z.style.top="40px";z.style.width="100%";z.style.overflow="hidden";z.style.pointerEvents="none";O("onReady")});f.onBeforePlay(function(a){a=u.getElementsByClassName("jw-title-primary")[0];void 0!=a&&(q=a.innerHTML,0>q.indexOf("<font")&&0<q.indexOf(" - ")&&(J=q.split(" - ")[0],K=q.split(" - ")[1],q=q.replace(" - "," - <font color='#c7c7c7'>"),q+="</font>",a.innerHTML=q));D()});f.on("meta",function(a){H("onMeta")});f.on("levels",function(a){var d=u.getElementsByClassName("jw-icon-hd")[0];
void 0!=d&&(G=d.className,"320k"==a.levels[a.currentQuality].label.toLowerCase()?d.className=G+" jw-icon-hd-320":"128k"==a.levels[a.currentQuality].label.toLowerCase()&&(d.className=G+" jw-icon-hd-128"))});f.on("visualQuality",function(a){void 0==v&&(v=u.getElementsByClassName("jw-icon-hd")[0].getElementsByClassName("jw-option"));"auto"!=a.mode&&"auto"!=a.reason||f.setCurrentQuality(a.level.index);0<v.length&&(a=v[0],"Auto"==a.innerHTML&&(a.className="jw-hidden"))});if(void 0===p.showVIP||!1===p.showVIP)f.on("firstFrame",
S);else f.on("firstFrame",T);f.on("levelsChanged",function(a){var d=f.getCurrentQuality(),b=u.getElementsByClassName("jw-icon-hd")[0];"320k"==a.levels[d].label.toLowerCase()?b.className=G+" jw-icon-hd-320":"128k"==a.levels[d].label.toLowerCase()&&(b.className=G+" jw-icon-hd-128");M&&(M=!1,f.setCurrentQuality(0))});f.on("time",function(a){C=a.position;g&&L();F||(a=f.getConfig().playlistItem.tracks,void 0!=a&&0<a.length&&void 0!=a[0].file&&H("onTime"))});f.on("seek",function(a){B=!0;l.style.width="0%";
k.style.width="0%"});f.on("seeked",function(a){B=!1});this.resize=function(a,b){};(function(){b=f.getCaptions();void 0==b.color&&(b.color="#FFFFFF");void 0==b.fontFamily&&(b.fontFamily="Roboto, Arial, sans-serif");b.fontOpacity=100;void 0==b.fontStyle&&(b.fontStyle="normal");void 0==b.fontWeight&&(b.fontWeight="normal");void 0==b.textDecoration&&(b.textDecoration="none");void 0==b.edgeStyle&&(b.edgeStyle="uniform");void 0==b.backgroundColor&&(b.backgroundColor="#000");void 0==b.windowColor&&(b.windowColor=
"#FFFFFF");b.fontSize=17;var a=b.fontOpacity,d=b.windowOpacity,e=b.edgeStyle,c=b.backgroundColor,g,t=I(N(b.color),a),p=b.fontFamily,q=b.fontStyle,v=b.fontWeight,w=b.textDecoration,u;d&&(g=I(N(b.windowColor),d));a=I("#000000",a);"dropshadow"===e?u="0 2px 1px "+a:"raised"===e?u="0 0 5px "+a+", 0 1px 5px "+a+", 0 2px 5px "+a:"depressed"===e?u="0 -2px 1px "+a:"uniform"===e&&(u="-2px 0 1px "+a+",2px 0 1px "+a+",0 -2px 1px "+a+",0 2px 1px "+a+",-1px 1px 1px "+a+",1px 1px 1px "+a+",1px -1px 1px "+a+",1px 1px 1px "+
a);b.back&&I(N(c),b.backgroundOpacity);n=document.createElement("div");A=document.createElement("div");h=document.createElement("div");m=document.createElement("p");l=document.createElement("span");r=document.createElement("p");k=document.createElement("span");h.appendChild(m);h.appendChild(document.createElement("br"));h.appendChild(r);n.style.display="block";n.style.height="auto";n.style.position="absolute";n.style.textAlign="center";n.style.width="100%";n.style.zIndex="1";A.style.display="inline-block";
void 0!=g&&(A.style.backgroundColor=g);h.style.color=t;h.style.display="inline-block";h.style.fontFamily=p;h.style.fontStyle=q;h.style.fontWeight=v;h.style.textAlign="center";h.style.textDecoration=w;h.style.wordWrap="break-word";h.style.textShadow=u;A.appendChild(h);n.appendChild(A);z.appendChild(n)})();var C=0;g&&L()})})(jwplayer);
function setAutoNext(D){var f=jwplayer().getContainer();void 0!=f&&(f=f.getElementsByClassName("jw-icon-auto-next")[0],void 0!=f&&(f.className=D?"jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-auto-next jw-icon-auto-next-on":"jw-icon jw-icon-inline jw-button-color jw-reset jw-icon-auto-next jw-icon-auto-next-off"))};