!function(){var _t="vast",Et="-1",e="time",d="[ERRORCODE]",It="vmap",Ct=5e3,St=15e3,xt="jwp",Rt="jwpspotx",n="state",Vt="autostartNotAllowed",Mt="viewable",Lt=5,l="paused",Bt="playing",Ht="adPodError",i="viewable",Ot="adBidRequest",jt="adBidResponse",qt="adBreakEnd",a="adBreakIgnored",Ft="adBreakStart",r="adClick",Dt="adComplete",Nt="adError",Ut="adImpression",Qt="adLoaded",u="adMeta",o="adPause",h="adPlay",Xt="adSchedule",p="adSkipped",t="adStarted",s="click",c="play",f="error",m="complete",v=[Ut,Nt,Ht],g=[t,Dt,Ut,r,p,Nt,h,o,u],y=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},A=function(){function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),Wt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},k=function(){function s(t,e,i,r,n){var a=this;y(this,s),this.player=t,this.state=t.state,this.vpaidURL=i,this.adTag=r,this.adParams=n.adParams,this.vpaidControls=n.vpaidControls,this.type="vpaid",this.instream=e||t.createInstream(),this.toRemove=[],this.vpaidState={linear:!1,expanded:!1,remainingTime:-1},this.paused=!1,Wt(this,t.Events),this.setMuteCallback=this.setMute.bind(this),this.playerContainer=this.player.getContainer(),n.adOptOut?setTimeout(function(){a.sendEvent("error",{message:"Conditional ad rejected",code:408})},0):(this.iframe=function(t,e,i,r){var n=document.createElement("iframe");n.setAttribute("gesture","media"),n.setAttribute("allow","autoplay"),n.src="javascript:false",t.style(n,{border:0,width:"100%",height:"100%",position:"absolute",overflow:"hidden"}),n.scrolling="no",i.querySelector(".jw-media").appendChild(n);var a=n.contentWindow.document;return a.open().write("\n    <body onload=\"\n        var js = document.createElement('script');\n        js.src = '"+e+"';\n        js.addEventListener('load', function() { window.myCallback(); });\n        document.body.appendChild(js);\"\n    style=\"margin: 0\">"),n.contentWindow.myCallback=r,a.close(),n}(t.utils,this.vpaidURL,this.playerContainer,this.callback.bind(this)),this.toRemove.push(this.iframe))}return s.prototype.sendEvent=function(t,e){(e=e||{}).tag||(e.tag=this.adTag),this.trigger(t,e)},s.prototype.sendTimeEvent=function(t,e,i){var r=e.getAdDuration(),n=e.getAdRemainingTime(),a=Wt({duration:r},i);this.sendEvent(t,a),0<n&&(a.position=r-n,this.trigger("time",a))},s.prototype.handleQuartile=function(t,e){this.sendTimeEvent("quartile",t,{quartile:e})},s.prototype.genEvent=function(e){var i=this;return function(t){i.on(e,t)}},s.prototype.setMute=function(){var t=0===this.vpaidAd.getAdVolume();this.player.getMute()!==t&&this.player.setMute(t)},s.prototype.userActive=function(){var t=this.player.utils.hasClass(this.playerContainer,"jw-flag-time-slider-above");this.player.utils.style(this.iframe,{bottom:t?66:60})},s.prototype.userInactive=function(){"paused"!==this.player.getState()&&this.player.utils.style(this.iframe,{bottom:"0.5em"})},s.prototype.prepareNonlinearAd=function(){var t=!this.player.utils.hasClass(this.playerContainer,"jw-flag-user-inactive");if(this.player.utils.style(this.iframe,{height:150}),this.resize(null,150),this.userActive(t),this.player.on("userActive",this.userActive,this),this.player.on("userInactive",this.userInactive,this),this.instream){this.instream.noResume=!0,this.instream.applyProviderListeners(null),this.instream.destroy(),this.instream=null;var e=this.playerContainer.querySelector(".jw-media"),i=e.querySelector("video,audio");e.insertBefore(i,this.iframe),i.play()}},s.prototype.genListeners=function(t){var r=this;return{AdLoaded:function(){t.setAdVolume(r.getPlayerVolume()),t.startAd()},AdStarted:function(){t.getAdLinear()?r.vpaidControls||(r.instream=r.instream||r.player.createInstream(),r.instream.hide()):r.prepareNonlinearAd(),r.sendEvent("impression",{linear:t.getAdLinear()?"linear":"nonlinear"}),r.sendEvent("play",{oldstate:"buffering",newstate:Bt,linear:t.getAdLinear()?"linear":"nonlinear"}),t.subscribe(r.setMuteCallback,"AdVolumeChange",t)},AdVideoStart:function(){r.sendEvent("started")},AdStopped:function(){P(r.toRemove),r.sendEvent("stopped")},AdPaused:function(){r.paused||(r.paused=!0,r.sendEvent("pause",{newstate:l,oldstate:Bt}))},AdPlaying:function(){r.paused&&(r.paused=!1,r.sendEvent("play",{newstate:Bt,oldstate:l,linear:t.getAdLinear()?"linear":"nonlinear"}))},AdLinearChange:function(){t.getAdLinear()?(r.player.utils.style(r.iframe,{height:"100%"}),r.player.off(null,null,r),r.instream=r.instream||r.player.createInstream(),r.instream.init(),r.vpaidControls||r.instream.hide()):r.prepareNonlinearAd()},AdDurationChange:function(){r.sendTimeEvent("remainingTimeChange",t,{isDurationChange:!0,remainingTime:t.getAdRemainingTime()})},AdRemainingTimeChange:function(){r.sendTimeEvent("remainingTimeChange",t,{remainingTime:t.getAdRemainingTime()})},AdExpandedChange:function(){r.sendEvent("expandedChange",{expanded:t.getAdExpanded()})},AdSkipped:function(){P(r.toRemove),r.sendEvent("skipped")},AdVideoFirstQuartile:function(){r.handleQuartile(t,1)},AdVideoMidpoint:function(){r.handleQuartile(t,2)},AdVideoThirdQuartile:function(){r.handleQuartile(t,3)},AdVideoComplete:function(){r.sendEvent("complete")},AdUserClose:function(){r.sendEvent("close")},AdClickThru:function(t,e,i){r.sendEvent("click",{id:e,url:t,playerHandles:i})},AdError:function(t){P(r.toRemove);var e=function(t){if(t){var e=t.match(/\b(?:[34])[0-9]{2}\b/);if(e)return parseInt(e[0],10);if(t.match(/timeout/i))return t.match(/vpaid|vast/i)?301:402;if(t.match(/found/i))return 401;if(t.match(/supported/i))return 403;if(t.match(/(?:displaying|media file)/i))return 405}return 901}(t);r.sendEvent("error",{message:t,code:e,adErrorCode:5e4+e})}}},s.prototype.callback=function(){var e=this.vpaidAd=this.iframe.contentWindow.getVPAIDAd(),t=e.handshakeVersion("2.0");if(parseFloat(t)<1)throw new Error("Invalid vpaid version in handshake");var i=this.genListeners(e);Object.keys(i).forEach(function(t){e.subscribe(i[t],t,e)}),this.listeners=i;var r={AdParameters:this.adParams},n=this.playerContainer.querySelector(".jw-media"),a=this.instream.getMediaElement(),s=this.iframe.contentWindow.document.createElement("div");s.className="jw-vpaid-wrapper",s.style.height="100%",this.iframe.contentWindow.document.body.appendChild(s);var o={videoSlot:a,slot:s};e.initAd(n.clientWidth,n.clientHeight,"normal",1e3,r,o),e.setAdVolume(this.getPlayerVolume())},s.prototype.play=function(){this.vpaidAd.resumeAd()},s.prototype.pause=function(){this.vpaidAd.pauseAd()},s.prototype.stop=function(){if(this.vpaidAd)try{this.vpaidAd.stopAd()}catch(t){console.log("Unhandled exception from VPAID2 Creative stopAd",t)}},s.prototype.getPlayerVolume=function(){return this.player.getMute()?0:this.player.getVolume()/100},s.prototype.setVolume=function(t){this.vpaidAd.setAdVolume(t/100)},s.prototype.resize=function(t,e){if(this.vpaidAd&&this.vpaidAd.resizeAd){var i=this.player.getFullscreen()||document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen?"fullscreen":"normal";this.vpaidAd.resizeAd(t||this.player.getWidth(),e||this.player.getHeight(),i)}},s.prototype.destroy=function(){if(P(this.toRemove),this.removeEvents(),this.vpaidAd)try{var e=this.listeners,i=this.vpaidAd;Object.keys(e).forEach(function(t){i.unsubscribe(e[t],t,i)}),i.unsubscribe(this.setMuteCallback,"AdVolumeChange",i)}catch(t){console.log("Unhandled exception from VPAID2 Creative",t)}this.player=null,this.instream=null},s.prototype.removeEvents=function(){this.player&&this.player.off(null,null,this),this.off()},s.prototype.attachMedia=function(){},s.prototype.detachMedia=function(){},s.prototype.volume=function(){},s.prototype.mute=function(){},s.prototype.getState=function(){return this.vpaidState.linear?this.paused?l:Bt:"idle"},s}();function P(t){for(;0<t.length;){var e=t.pop();e.parentNode&&e.parentNode.removeChild(e)}}var zt={},w=[];var $t=function(){function o(t,e,i,r){var n=this;y(this,o);var a,s=t||{};this.map=s,this.debugTrackFn=e,this.trackerPlayerUtils=(a=i,{getPosition:function(){return a.getPosition()},getFile:function(){return a.getPlaylistItem().file}}),this.trackingFilter=r,this.lastQuartile=0,this.progressEvents=[],this.breakStarted=!1,this.started=!1,this.firedError=!1,this.hasComp=!1,zt._.map(s,function(t,e){if(s.hasOwnProperty(e)&&0===e.indexOf("progress")){var i=""+e.split("_")[1],r={key:e,offset:i,tracked:!1,percentage:!1};/^\d+%$/.test(i)?(r.percentage=!0,r.offset=parseFloat(i)):r.offset=zt.utils.seconds(i),n.progressEvents.push(r)}}),this.setFactories()}return o.prototype.getUrls=function(t){return this.map.hasOwnProperty(t)?this.map[t]:[]},o.prototype.addUrl=function(t,e){this.map.hasOwnProperty(t)||(this.map[t]=[]),this.map[t].push(e)},o.prototype.trackPings=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=this.getUrls(t),r=this.trackingFilter,n=[],a=[],s=[];if(i.length){e=this.replaceMacros(e),i.forEach(function(i){if(i){if(zt._.each(e,function(t,e){i=i.replace(e,t)}),r&&!1===r(i))return void a.push(i);var t=new Image;t.src=i,n.push(i),s.push(t)}}),Array.prototype.push.apply(w,s);for(var o=w.length;o--&&(w[o].width||w[o].complete);)w.length=o}"function"==typeof this.debugTrackFn&&this.debugTrackFn({type:"ping",data:{pingType:t,urls:n,filteredUrls:a,images:s}})},o.prototype.replaceMacros=function(t){var e,i,r,n,a,s,o;return t["[TIMESTAMP]"]=encodeURIComponent((e=new Date,i=e.getTime(),r=e.getTimezoneOffset()/60,n=6e4*e.getTimezoneOffset(),new Date(i-n).toISOString().slice(0,-1)+(0<r?"-":"+")+("0"+r).slice(-2))),t["[CACHEBUSTING]"]=Math.random().toString().slice(2,10),t["[ASSETURI]"]=encodeURIComponent(this.trackerPlayerUtils.getFile()),t["[CONTENTPLAYHEAD]"]=encodeURIComponent((a=this.trackerPlayerUtils.getPosition(),s=("0"+Math.floor(a/3600)).slice(-2),o=("0"+Math.floor((a-3600*s)/60)).slice(-2),s+":"+o+":"+("0"+Math.floor(a-3600*s-60*o)).slice(-2)+"."+(a%1).toFixed(3).toString().slice(2,5))),t},o.prototype.start=function(){this.started=!0,this.trackPings("start")},o.prototype.breakStart=function(){this.breakStarted=!0,this.trackPings("breakStart")},o.prototype.time=function(t,e){if(!(e<=1)){for(var i=(4*t+.05)/e|0;i>this.lastQuartile&&this.lastQuartile<3;)this.lastQuartile++,1===this.lastQuartile?this.trackPings("firstQuartile"):2===this.lastQuartile?this.trackPings("midpoint"):3===this.lastQuartile&&this.trackPings("thirdQuartile");this.trackProgress(t,e)}},o.prototype.trackProgress=function(t,e){for(var i=this.progressEvents.length;i--;){var r=this.progressEvents[i];if(!r.tracked){var n=r.offset;r.percentage&&(n=e*n/100),n<=t&&(r.tracked=!0,this.trackPings(r.key))}}},o.prototype.error=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:900;this.firedError=!0;var e={};e[d]=t,this.trackPings("error",e)},o.prototype.factory=function(t){var e=this;return function(){e.trackPings(t)}},o.prototype.setFactories=function(){this.creativeView=this.factory("creativeView"),this.click=this.factory("click"),this.skip=this.factory("skip"),this.complete=this.factory("complete"),this.pause=this.factory("pause"),this.resume=this.factory("resume"),this.mute=this.factory("mute"),this.unmute=this.factory("unmute"),this.fullscreen=this.factory("fullscreen"),this.expand=this.factory("expand"),this.collapse=this.factory("collapse"),this.acceptInvitation=this.factory("acceptInvitation"),this.close=this.factory("close"),this.rewind=this.factory("rewind"),this.impression=this.factory("impression"),this.breakEnd=this.factory("breakEnd")},o}();function Gt(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:900,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:60900,r={};return r.message=t,r.code=e,r.adErrorCode=i,r}function T(t,e){t.wrappedTags&&(e.wrapperAdSystem=t.wrapper||"",e.tag=t.wrappedTags.pop(),e.wrappedTags=t.wrappedTags),e.adsystem=t.adsystem||""}function Jt(t,e,i){var r=t.vmap?t.vmap:t.adschedule||t.adbreak;if(r&&i[r.breakid]){var n=i[r.breakid],a=n.bid.getEventObject(_t,n.bidders,{});t.mediationLayerAdServer=a.mediationLayerAdServer,t.bidders=a.bidders,a.floorPriceCents&&(t.floorPriceCents=a.floorPriceCents)}return t}function Kt(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return{client:_t,adposition:null!==e?e:function(t){if(t.isBeforePlay()||0===t.getPosition())return"pre";if(t.isBeforeComplete()||t.getPosition()===t.getDuration())return"post";return"mid"}(t),viewable:t.getViewable()}}var Yt=function(){function s(t,e,i,r,n,a){y(this,s),this.player=e,this.staticPlayer=i,this.companion=r,this.optionalParams=n,this.debugTrackFn=a,this.scheduledAd=t.scheduledAd(),this.vastBuffet=t.adBuffet(),this.vastAdPod=t.adPod(),this.vastAd=this.vastBuffet.length?this.vastBuffet[0]:null,this.adType=null,this.vpaidPlayer=null,this.instreamPlayer=null,this.blockingInstreamPlayer=null,this.mediaType=null,this.adPodItems=null,this.creativeTimeout=null,this.vastOptions=null,this.duration=0,this.position=0,this.adPodIndex=0,this.initialIndex=0,Wt(this,e.Events)}return s.prototype.init=function(t){return this.init=function(){throw new Error("Adplayer can only be initialized once")},this.blockingInstreamPlayer=t,!!this.prepareAdPod()&&(this.player.on("fullscreen",this.playerFullscreenHandler,this),this.player.on("volume",this.playerVolumeHandler,this),this.player.on("mute",this.muteHandler,this),this.player.on("resize",this.playerResizeHandler,this),this.playAd())},s.prototype.prepareAdPod=function(){var e=this,t=null,i=0,r=[];if(this.vastAd&&(C(this.vastAd,this.debugTrackFn,this.player,this.optionalParams.trackingFilter),(t=this.prepareAdPodItem(this.vastAd))&&"vpaid"===t.adType&&!I(this.vastAd)&&(t=null)),this.vastAdPod)for(var n=null,a=0;a<this.vastAdPod.length;a++){var s=this.vastAdPod[a];C(s,this.debugTrackFn,this.player,this.optionalParams.trackingFilter);var o=this.prepareAdPodItem(s);if(o){if(n!==o.adType&&"instream"===n)break;if(n=o.adType,"vpaid"!==o.adType||I(s)){var d=r.length+i===a;o&&d&&r.push(o)}else i++}else i++}if(!r.length&&!t)return this.adError("No Compatible Creatives",403),!1;var l=void 0;return r.length?(l=r,this.vastOptions=[],l.forEach(function(t){e.vastOptions.push(e.getInstreamOptions(t.vastAd))})):(l=t,this.vastOptions=this.getInstreamOptions(this.vastAd)),this.adPodItems=l,!(this.adPodIndex=0)},s.prototype.prepareAdPodItem=function(t){t.tracker.linear="linear";var e=(""+t.media[0].adType).toLowerCase()||"instream";"vpaid"!==e||I(t)||(e="instream");var i={vastAd:t,sources:[],adType:e};this.scheduledAd.skipoffset&&(i.skipoffset=this.scheduledAd.skipoffset);var r,n,a=t.media,s={};if(zt._.each(a,function(t){i.sources.push({file:t.file,mimeType:t.type,type:(""+t.type).replace(/^(?:video|audio)\/(?:x-)?/,"")}),s[t.file]={width:t.width||0,height:t.height||0}}),"instream"===e&&(i.sources=(r=i.sources,n=void 0,n=jwplayer.api.availableProviders.filter(function(t){return"flash"!==t.name}),r.filter(function(e){return n.some(function(t){return t.supports(e)})}))),0===i.sources.length)return null;this.mediaType=(""+i.sources[0].mimeType).toLowerCase(),i.vastAd.selectedMedia=i.sources[0];var o=this.player.getSafeRegion(!0),d=null,l=null;return i.sources.forEach(function(t){var e=s[t.file];e.width<=o.width&&(!d||e.width>s[d.file].width)&&(d=t),e.width>=o.width&&(!l||e.width<s[l.file].width)&&(l=t)}),d?(i.vastAd.selectedMedia=d).default=!0:l&&((i.vastAd.selectedMedia=l).default=!0),i},s.prototype.getInstreamOptions=function(t){var e=0<=this.optionalParams.skipoffset?this.optionalParams.skipoffset:null;return{skipoffset:t.skipoffset||this.scheduledAd.skipoffset||e,skipMessage:this.optionalParams.skipMessage,skipText:this.optionalParams.skipText}},s.prototype.getVastAd=function(t){if(this.adPodItems){var e=void 0;if((e=this.adPodItems.length?this.adPodItems[t]:this.adPodItems).vastAd)return e.vastAd}else if(this.vastAdPod&&this.vastAdPod.length)return this.vastAdPod[t];return this.vastAd},s.prototype.adError=function(t,e,i){clearTimeout(this.creativeTimeout);var r=this.getVastAd(this.adPodIndex),n=Gt(t,e,i=i||(e?1e4+e:null));(n.creativeId=r.creativeId||"",b(r,n),_(r,n),this.vastAdPod&&this.adPodIndex<this.vastAdPod.length-1)?this.triggerEvent("adPodError",n):(r.tracker.error(n.code),T(r,n),this.addConditionalAdData(n),this.triggerEvent(Nt,n))},s.prototype.playAd=function(){var t=this.adPodItems[this.adPodIndex]||this.adPodItems;if(this.adType=t.adType,this.blockingInstreamPlayer){var e=this.player.getConfig().localization.loadingAd;this.blockingInstreamPlayer.setText(e)}if("vpaid"===this.adType)return this.playVpaid(t.vastAd);if("static"===this.adType)return this.playStatic(),!0;var i=Array.isArray(this.adPodItems)?this.adPodItems.slice(this.adPodIndex):this.adPodItems,r=Array.isArray(this.vastOptions)?this.vastOptions.slice(this.adPodIndex):this.vastOptions;return this.initialIndex=this.adPodIndex,this.playInstream(i,r)},s.prototype.clearVpaidBlocking=function(){if(this.vpaidPlayer.instream){var t=this.vpaidPlayer.instream;this.vpaidPlayer.instream=null,this.clearBlocking(t)}},s.prototype.clearBlocking=function(t){(t=t||this.blockingInstreamPlayer)&&t!==this.instreamPlayer&&t.destroy()},s.prototype.getState=function(){return this.instreamPlayer?this.instreamPlayer.getState():this.vpaidPlayer?this.vpaidPlayer.getState():""},s.prototype.clearNonlinear=function(){this.staticPlayer.stop(),this.vpaidPlayer&&(this.clearVpaidBlocking(),this.vpaidPlayer&&(this.vpaidPlayer.stop(),this.vpaidPlayer.destroy(),this.vpaidPlayer=null))},s.prototype.destroy=function(){if(clearTimeout(this.viewableTimeout),clearTimeout(this.creativeTimeout),this.off(),this.removePlayerListeners(),clearTimeout(this.creativeTimeout),this.instreamPlayer){var t=this.instreamPlayer;this.instreamPlayer=null,this.clearBlocking(t)}this.vpaidPlayer&&(this.clearVpaidBlocking(),this.vpaidPlayer&&(this.vpaidPlayer.destroy(),this.vpaidPlayer=null)),this.clearNonlinear(),this.vastLoader=null,this.player=null,this.instreamPlayer=null,this.scheduledAd=null,this.vastBuffet=null,this.vastAd=null,this.vastAdPod=null},s.prototype.pause=function(){this.instreamPlayer?this.instreamPlayer.pause():this.vpaidPlayer&&this.vpaidPlayer.pause()},s.prototype.play=function(){this.instreamPlayer?this.instreamPlayer.play():this.vpaidPlayer&&this.vpaidPlayer.play()},s.prototype.removePlayerListeners=function(){this.player&&(this.player.off("fullscreen",this.playerFullscreenHandler,this),this.player.off("volume",this.playerVolumeHandler,this),this.player.off("mute",this.muteHandler,this),this.player.off(i,this.viewableHandler,this)),this.instreamPlayer&&this.instreamPlayer.off(null,null,this),this.vpaidPlayer&&(this.vpaidPlayer.removeEvents(),this.clearVpaidBlocking(),this.vpaidPlayer&&(this.vpaidPlayer.destroy(),this.vpaidPlayer=null)),this.staticPlayer.stop(),this.staticPlayer.removeEvents()},s.prototype.adEventObject=function(t){var e=this.scheduledAd._adQueue||{},i={id:this.scheduledAd._id,tag:this.scheduledAd._currentTag,client:_t,witem:this.scheduledAd._waterfallIndex||1,wcount:e.length||1,viewable:this.player.getViewable()};if(this.scheduledAd._adbreak&&(i.adschedule=this.scheduledAd._adbreak,i.adschedule.offset=this.scheduledAd._offSet),this.scheduledAd._adTagQueue){var r=Math.max(0,this.scheduledAd._waterfallIndex-1);i.adtagid=this.scheduledAd._adTagQueue[r]}if(null!==this.scheduledAd._preload&&(i.preloadAds=this.scheduledAd._preload),this.adPodItems&&this.adPodItems.length&&(i.sequence=this.adPodIndex+1,i.podcount=this.adPodItems.length),this.mediaType&&(i.creativetype=this.mediaType),this.scheduledAd._vmap&&(i.vmap=this.scheduledAd._vmap),-1!==g.indexOf(t)){var n=this.getVastAd(this.adPodIndex);i.universalAdIdRegistry=n.universalAdIdRegistry,i.universalAdIdValue=n.universalAdIdValue,i.categories=n.categories}return i},s.prototype.playStatic=function(){this.vastAd.tracker.linear="nonlinear";var t=this.vastAd.media[0];this.vastAd.selectedMedia=t;var e=this.vastAd.clickthrough||"",i=this.staticPlayer;i.removeEvents(),i.on("play",this.impressionHandler,this),i.on("play",this.playHandler,this),i.on("complete",this.combinedCompleteHandler,this),i.on("click",this.clickStaticHandler,this),i.on("error",this.staticErrorHandler,this),i.playAd(t.file,e,t.minDuration,this.scheduledAd._currentTag,this.scheduledAd.requestTimeout),this.clearBlocking()},s.prototype.creativeAdError=function(t,e,i){this.adError(t,e,i),this.adPodItems&&this.adPodItems.length-1>this.adPodIndex&&(this.vpaidPlayer&&(this.vpaidPlayer.destroy(),this.vpaidPlayer=null),this.adPodIndex++,this.playAd())},s.prototype.playVpaid=function(t){var e=this;clearTimeout(this.creativeTimeout),this.creativeTimeout=setTimeout(function(){e.creativeAdError("VPAID tag communication timeout",900,50004)},this.scheduledAd.creativeTimeout);var i=I(this.vastAd=t),r=this.optionalParams.conditionaladoptout&&t.conditionalAd;if(this.vastAd.selectedMedia=i,this.mediaType=i.type,"flash"===E(i))return this.creativeAdError("Flash creatives are not supported",403,10403),!1;var n={adParams:this.vastAd.adParams,vpaidControls:this.optionalParams.vpaidcontrols,adOptOut:r};return this.vpaidPlayer=new k(this.player,this.blockingInstreamPlayer,i.file,this.scheduledAd._currentTag,n),this.blockingInstreamPlayer&&this.blockingInstreamPlayer.applyProviderListeners(this.vpaidPlayer),this.vpaidPlayer.on("play",this.playHandler,this),this.vpaidPlayer.on("pause",this.pauseHandler,this),this.vpaidPlayer.on("quartile",this.quartileHandler,this),this.vpaidPlayer.on("remainingTimeChange",this.remainingTimeHandler,this),this.vpaidPlayer.on("click",this.clickVpaidHandler,this),this.vpaidPlayer.on("error",this.playbackErrorHandler,this),this.vpaidPlayer.on("impression",this.impressionHandler,this),this.vpaidPlayer.on("expandedChange",this.vpaidExpandedHandler,this),this.vpaidPlayer.on("close",this.adCloseHandler,this),this.vpaidPlayer.on("skipped",this.vpaidAdSkipped,this),this.vpaidPlayer.on("stopped",this.endOfVpaidAdHandler,this),this.vpaidPlayer.on("complete",this.adCompleteHandler,this),this.vpaidPlayer.on("started",this.adStartedHandler,this),this.setupSkipButton(),!0},s.prototype.setupSkipButton=function(){var t=this.optionalParams.skipoffset;0<=t&&this.blockingInstreamPlayer&&(this.blockingInstreamPlayer.off(p,this.skipVpaidAd,this),this.blockingInstreamPlayer.setupSkipButton(t,this.optionalParams,zt.utils.noop),this.blockingInstreamPlayer.on(p,this.skipVpaidAd,this))},s.prototype.playInstream=function(t,e){var i=this,r=this.player.getEnvironment().OS;return r.android&&2===r.version.major&&3===r.version.minor?(this.adError("Android 2.3 not supported",900,60007),!1):(clearTimeout(this.creativeTimeout),this.creativeTimeout=setTimeout(function(){i.creativeAdError("VAST tag communication timeout",900,60004)},this.scheduledAd.creativeTimeout),this.blockingInstreamPlayer?this.instreamPlayer=this.blockingInstreamPlayer:this.instreamPlayer=this.player.createInstream().init(),this.instreamPlayer.on("play",this.playHandler,this),this.instreamPlayer.on("pause",this.pauseHandler,this),this.instreamPlayer.on("time",this.timeHandler,this),this.instreamPlayer.on("playlistItem",this.playlistItemHandler,this),this.instreamPlayer.on("complete",this.adCompleteHandler,this),this.instreamPlayer.on("playlistComplete",this.endOfAdBreakHandler,this),this.instreamPlayer.on("mute",this.muteHandler,this),this.instreamPlayer.on("instreamClick",this.clickInstreamHandler,this),this.instreamPlayer.on("adSkipped",this.adSkipped,this),this.instreamPlayer.on("error",this.playbackErrorHandler,this),this.instreamPlayer.on("mediaError",this.playbackErrorHandler,this),this.instreamPlayer.on("destroyed",function(){i.instreamPlayer=null},this),this.instreamPlayer.loadItem(t,e),this.clearBlocking(),!0)},s.prototype.playerFullscreenHandler=function(t){var e=this.getVastAd(this.adPodIndex).tracker;t.fullscreen&&e.started&&e.fullscreen()},s.prototype.playerResizeHandler=function(t){this.vpaidPlayer&&this.vpaidPlayer.resize(t.width,t.height)},s.prototype.playerVolumeHandler=function(t){this.vpaidPlayer&&this.vpaidPlayer.setVolume(t.volume)},s.prototype.playlistItemHandler=function(t){this.instreamPlayer&&(this.adPodIndex=t.index+this.initialIndex)},s.prototype.impressionHandler=function(t){var e=this.getVastAd(this.adPodIndex),i=e.tracker;i.impression();var r={};r.adposition=this.scheduledAd._position||"",r.adtitle=e.adTitle||"",r.creativeId=e.creativeId||"",T(e,r),r.vastversion=e.vastversion,r.clickThroughUrl=e.clickthrough,r.duration=e.duration||0,r.mediafile={file:e.selectedMedia.file},r.linear=t.linear||i.linear,this.addConditionalAdData(r),b(e,r),_(e,r),this.triggerEvent(Ut,r),this.addViewableImpressionHandler()},s.prototype.addViewableImpressionHandler=function(){this.player.off(i,this.viewableHandler,this),this.player.on(i,this.viewableHandler,this),this.viewableHandler()},s.prototype.viewableHandler=function(t){var e=this;clearTimeout(this.viewableTimeout),this.viewableTimeout=null,(t?t.viewable:this.player.getViewable())&&(this.viewableTimeout=setTimeout(function(){e.player.off(i,e.viewableHandler,e),e.triggerEvent("adViewableImpression",{})},2e3))},s.prototype.playHandler=function(t){clearTimeout(this.creativeTimeout);var e,i,r=this.getVastAd(this.adPodIndex),n=r.tracker,a=void 0;if(n.started)t.oldstate===l&&(n.resume(),this.dispatchPlay(t));else{this.vpaidPlayer&&(n.linear=t.linear),this.instreamPlayer&&this.impressionHandler({linear:n.linear});var s=Wt({linear:n.linear},this.getInstreamOptions(r));s.adMessage=this.optionalParams.dynamicMessage||"",s.clickThroughUrl=r.clickthrough,s.sequence&&(s.podMessage=this.optionalParams.podMessage||""),r.adTitle&&(s.adtitle=r.adTitle),r.companions&&(s.companions=r.companions),_(r,s),this.triggerEvent(u,s),r.companions&&((a={}).companions=(i=r.companions,zt._.map(i,function(t){var e="iframe"===t.type||"html"===t.type?t.type:"static",i=void 0;return t.trackers&&t.trackers.creativeView&&t.trackers.creativeView.length&&(i=t.trackers.creativeView),{width:t.width,height:t.height,type:e,resource:t.source,creativeview:i,click:t.clickthrough}})),a.universalAdIdRegistry=r.companionUniversalAdIdRegistry,a.universalAdIdValue=r.companionUniversalAdIdValue,this.triggerEvent("adCompanions",a));var o=this.companion,d=void 0;9<zt.utils.flashVersion()?d=r.companions:(e=r.companions,d=zt._.filter(e,function(t){return t.type.indexOf("flash")<0})),this.optionalParams.companion&&d&&d.length&&(n.hasComp=o.addCompanion(this.optionalParams.companion,d)),n.start(),n.creativeView(),this.dispatchPlay(t)}},s.prototype.dispatchPlay=function(t){if("static"!==this.adType&&("vpaid"!==this.adType||"linear"===t.linear)){var e=t.oldstate,i=t.newstate,r={};r.oldstate=e,r.newstate=i,this.triggerEvent(h,r),this.vpaidPlayer&&this.vpaidPlayer.trigger(n,r)}},s.prototype.pauseHandler=function(t){this.getVastAd(this.adPodIndex).tracker.pause();var e=t.oldstate,i=t.newstate,r={};r.oldstate=e,r.newstate=i,this.triggerEvent(o,r),this.vpaidPlayer&&this.vpaidPlayer.trigger(n,{newstate:i,oldstate:e})},s.prototype.remainingTimeHandler=function(t){t.duration?this.duration=t.duration:this.duration=Math.max(1,this.duration,t.remainingTime);var e=0<=t.remainingTime?this.duration-t.remainingTime:0;this.timeHandler({position:e,duration:this.duration,isDurationChange:t.isDurationChange})},s.prototype.quartileHandler=function(t){if(t.duration)this.duration=t.duration;else{var e=4*t.remainingTime/(4-t.quartile);this.duration=Math.max(this.duration,1,e)}this.timeHandler({position:this.duration*t.quartile*.25,duration:this.duration})},s.prototype.timeHandler=function(t){var e=this.getVastAd(this.adPodIndex),i=t.position,r=t.duration,n=r-i,a=e.tracker,s=this.optionalParams.dynamicMessage||"",o=this.optionalParams.podMessage||"";if(s&&0<n){if(s=s.replace(/xx/gi,""+Math.ceil(n)),this.adPodItems&&1<this.adPodItems.length&&o){var d=this.adPodIndex+1;s=(o=(o=o.replace(/__AD_POD_CURRENT__/g,""+d)).replace(/__AD_POD_LENGTH__/g,""+this.adPodItems.length))+" "+s}this.instreamPlayer?this.instreamPlayer.setText(s):this.vpaidPlayer&&this.vpaidPlayer.instream&&this.vpaidPlayer.instream.setText(s)}if(!t.isDurationChange){a&&a.time(i,r);var l={};l.position=this.position=i,l.duration=r,this.triggerEvent("adTime",l)}},s.prototype.combinedCompleteHandler=function(){this.adCompleteHandler(),this.endOfAdBreakHandler()},s.prototype.adCompleteHandler=function(){clearTimeout(this.viewableTimeout);var t=this.getVastAd(this.adPodIndex).tracker;t.firedError||(t.complete(),this.triggerEvent(Dt))},s.prototype.adCloseHandler=function(){clearTimeout(this.viewableTimeout);var t=this.getVastAd(this.adPodIndex).tracker;t.firedError||t.close()},s.prototype.adStartedHandler=function(){this.triggerEvent(t)},s.prototype.endOfVpaidAdHandler=function(){if(clearTimeout(this.viewableTimeout),this.adPodItems&&this.adPodItems.length-1>this.adPodIndex)return this.vpaidPlayer&&(this.vpaidPlayer.destroy(),this.vpaidPlayer=null),this.adPodIndex++,void this.playAd();this.endOfAdBreakHandler()},s.prototype.endOfAdBreakHandler=function(){this.removePlayerListeners(),this.trigger(Dt)},s.prototype.muteHandler=function(t){var e=this.getVastAd(this.adPodIndex).tracker;e&&(t.mute?e.mute():e.unmute(),this.vpaidPlayer&&this.vpaidPlayer.setVolume(t.mute?0:this.player.getVolume()))},s.prototype.clickStaticHandler=function(){var t=this.getVastAd(this.adPodIndex);this.player.pause(!0),this.clickThrough(t)},s.prototype.clickVpaidHandler=function(t){var e=this.getVastAd(this.adPodIndex),i=!0;t&&t.url&&(!1===t.playerHandles&&(i=!1),e.clickthrough=t.url),this.clickThrough(e,i)},s.prototype.clickInstreamHandler=function(){this.instreamPlayer.getState()!==l&&this.clickThrough(this.getVastAd(this.adPodIndex))},s.prototype.clickThrough=function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];t.tracker.click();var i={};t.clickthrough&&(i.clickThroughUrl=t.clickthrough),this.triggerEvent(r,i),window.jwcast&&window.jwcast.player.id||t.clickthrough&&e&&window.open(t.clickthrough)},s.prototype.skipVpaidAd=function(){this.endOfVpaidAdHandler(),this.vpaidAdSkipped()},s.prototype.vpaidAdSkipped=function(){this.adSkipped(),this.endOfVpaidAdHandler()},s.prototype.adSkipped=function(){clearTimeout(this.viewableTimeout);var t=this.getVastAd(this.adPodIndex);t.tracker.skip();var e=this.optionalParams.skipoffset;this.triggerEvent(p,{duration:t.duration,skipoffset:e,position:this.position,watchedPastSkipPoint:this.position-e})},s.prototype.playbackErrorHandler=function(t){var e=t.message||"Error Playing Ad Tag",i=t.code;(!i||i<=4)&&(i=400),this.vpaidPlayer&&"function"==typeof this.vpaidPlayer.off?(this.vpaidPlayer.off(),this.creativeAdError(e,i,t.adErrorCode)):this.adError(e,i,t.adErrorCode)},s.prototype.staticErrorHandler=function(){this.adError("Unable to fetch NonLinear resource",502)},s.prototype.vpaidExpandedHandler=function(t){var e=this.getVastAd(this.adPodIndex).tracker;t.expanded?e.expand():e.collapse()},s.prototype.triggerEvent=function(t,e){var i=this.adEventObject(t);e&&Wt(i,e),-1!==v.indexOf(t)?this.trigger(t,i):this.player.trigger(t,i)},s.prototype.addConditionalAdData=function(t){this.vastAd&&(t.conditionalAd=this.vastAd.conditionalAd),this.vastAdPod&&this.vastAdPod.length&&(t.conditionalAd=this.vastAdPod[this.adPodIndex].conditionalAd),t.conditionalAdOptOut=this.optionalParams.conditionaladoptout},s}();function b(t,e){"boolean"==typeof t.mediaFileCompliance&&(e.mediaFileCompliance=t.mediaFileCompliance,t.nonComplianceReasons&&(e.nonComplianceReasons=t.nonComplianceReasons))}function _(t,e){e.request=t.request,e.response=t.response}function E(t){return"application/javascript"===(e=t).type||"application/x-javascript"===e.type?"html5":"flash";var e}function I(t){for(var e=void 0,i=0;i<t.media.length;i++){var r=t.media[i];if("html5"===E(r)){e=r;break}}return e}function C(t,e,i,r){t.tracker=new $t(t.trackers,e,i,r)}var Zt=function(){function i(t,e){y(this,i),this.debugTrackFn=t,this.div=null,this.elem=null,this.environment=e}return i.prototype.addCompanion=function(t,e){if(this.div=t,this.elem=document.getElementById(this.div.id),!this.elem)return!1;for(var i=0;i<e.length;i++)if(this.fitsDiv(e[i]))return this.placeCompanion(e[i]),!0;return!1},i.prototype.removeCompanion=function(){this.elem.innerHTML=""},i.prototype.sendPings=function(t){(t=t.creativeView)&&(t.forEach(function(t){(new Image).src=t}),"function"==typeof this.debugTrackFn&&this.debugTrackFn({type:"companion",data:{trackers:t}}))},i.prototype.placeCompanion=function(t){if(this.removeCompanion(),"html"===t.type){var e=document.createElement("div");e.innerHTML=t.source;var i=e.getElementsByTagName("script");return i.length&&zt._.map(i,function(t){new zt.utils.scriptloader(t.src).load(),t.parentElement.removeChild(t)}),this.elem.appendChild(e),void this.sendPings(t.trackers)}if("iframe"===t.type){var r=document.createElement("iframe");return r.height=this.div.height,r.width=this.div.width,r.src=t.source,r.scrolling="no",r.style.border="none",r.marginWidth=0,r.marginHeight=0,this.sendPings(t.trackers),this.elem.innerHTML="",void this.elem.appendChild(r)}if("application/x-shockwave-flash"===t.type){var n=document.createElement("object");return n.setAttribute("type","application/x-shockwave-flash"),n.setAttribute("data",t.source),n.setAttribute("width","100%"),n.setAttribute("height","100%"),n.setAttribute("tabindex",0),S(n,"allowfullscreen","true"),S(n,"allowscriptaccess","always"),S(n,"seamlesstabbing","true"),S(n,"wmode","opaque"),this.elem.appendChild(n),void this.sendPings(t.trackers)}var a=new Image;a.src=t.source,zt.utils.exists(t.clickthrough)&&(a.onclick=function(){window.open(t.clickthrough,"_blank").focus()}),this.elem.innerHTML="",this.elem.appendChild(a),this.sendPings(t.trackers)},i.prototype.fitsDiv=function(t){return t.width===this.div.width&&t.height===this.div.height},i}();function S(t,e,i){var r=document.createElement("param");r.setAttribute("name",e),r.setAttribute("value",i),t.appendChild(r)}var te=Date.now||function(){return(new Date).getTime()},ee=function(){function e(t){y(this,e),this.preRoll=null,this.vmap=null,this.postRoll=null,this.midRolls=[],this.playedMidRolls=[],this.adRules=t,this.duration=0}return e.prototype.setPreRoll=function(t){this.preRoll=t},e.prototype.getPreRoll=function(t){return t&&"none"===this.adRules.startOnSeek?null:x(this.preRoll,this.requestTimeout,this.creativeTimeout)},e.prototype.getPostRoll=function(t){var e=x(this.postRoll,this.requestTimeout,this.creativeTimeout);return this.adRules.timeBetweenAdsAllowsAdPlayback(e,t)?e:null},e.prototype.getMidRollAtIndex=function(t){return x(this.midRolls[t],this.requestTimeout,this.creativeTimeout)},e.prototype.getLastMidRollIndexBetweenTime=function(t,e,i){if(e<t)return null;this.sort(i);for(var r=this.midRolls.length;r--;){var n=this.midRolls[r],a=R(this.midRolls[r]._offSet,i);if(a<=t)return null;if(a<=e){var s=x(n,this.requestTimeout,this.creativeTimeout);if(!this.adRules.timeBetweenAdsAllowsAdPlayback(s))return null;if(!this.adRules.timeBetweenAds){if(0<=this.playedMidRolls.indexOf(r))return null;this.playedMidRolls.push(r)}return r}}return null},e.prototype.peek=function(t,e,i){if(this.midRolls.length>this.playedMidRolls.length){this.sort(i);for(var r=0;this.midRolls[r];){var n=R(this.midRolls[r]._offSet,i);if(t<=n&&-1===this.playedMidRolls.indexOf(r)){var a=te()+1e3*(n-t);return n<=e&&this.adRules.timeBetweenAdsAllowsAdPlayback(null,a)?r:null}r+=1}}var s=te()+1e3*(i-t);return this.postRoll&&i<=e&&this.adRules.timeBetweenAdsAllowsAdPlayback(null,s)?-1:null},e.prototype.getNextMidrollIndex=function(t,e,i){if(this.adRules.timeBetweenAds||this.adRules.startOnSeek)return this.getLastMidRollIndexBetweenTime(t,e,i);if(this.midRolls.length>this.playedMidRolls.length){var r=this.getClosestIndex(e,i);if(0<=r&&this.playedMidRolls.indexOf(r)<0)return this.playedMidRolls.push(r),r}return null},e.prototype.getMidRolls=function(){var e=this;return this.midRolls.map(function(t){return x(t,e.requestTimeout,e.creativeTimeout)})},e.prototype.reset=function(){this.playedMidRolls=[],this.duration=0},e.prototype.addMidRoll=function(t){this.midRolls.push(t),this.duration=0},e.prototype.setPostRoll=function(t){this.postRoll=t},e.prototype.sort=function(i,t){(!i||i<1)&&(i=1),(this.duration!==i||t)&&(this.duration=i,this.midRolls.sort(function(t,e){return R(t._offSet,i)-R(e._offSet,i)}),function(t,e){for(var i=0;i<t.length;i++){var r=t[i];e?r._vmap.item=i+1:r._adbreak={item:i+1,tags:r._adQueue,breakid:r._breakId}}}(this.getAllAds(),t))},e.prototype.getAllAds=function(){var t=this.preRoll?[this.preRoll]:[],e=this.postRoll?[this.postRoll]:[];return t.concat(this.midRolls,e)},e.prototype.getAdScheduleEventObject=function(){var t=this.getAllAds(),r=[],e={tag:this.getVMAP(),client:"vast",adbreaks:[]};return zt.utils.foreach(t,function(t,e){var i={type:e._type,offset:e._offSet};e._vmap?i.vmap=e._vmap:i.adbreak=Wt({},e._adbreak),r.push(i)}),e.adbreaks=r,e},e.prototype.setVMAP=function(t){this.vmap=t},e.prototype.isVMAP=function(){return!!this.vmap},e.prototype.getVMAP=function(){return this.vmap},e.prototype.getClosestIndex=function(t,e){this.sort(e);for(var i=this.midRolls.length;i--;)if(t>=R(this.midRolls[i]._offSet,e))return i;return-1},e}();function x(t,e,i){var r=void 0;if(zt.utils.foreach(t,function(t,e){(r=r||{})[t]="_adQueue"===t?e.slice():e}),r)return r.requestTimeout=e,r.creativeTimeout=i,r}function R(t,e){return"%"===t.toString().slice(-1)?e*parseFloat(t.slice(0,-1))/100:parseFloat(t)}var ie=function(){function t(){y(this,t)}return t.prototype.getSchedule=function(t,e){var i=new ee(e);if(i.requestTimeout=M(t.requestTimeout,Ct),i.creativeTimeout=M(t.creativeTimeout,St),t.tag)i.setPreRoll({_offSet:"pre",_adQueue:V(t.tag),_waterfallIndex:0});else if("string"==typeof t.vastxml)i.setPreRoll({_offSet:"pre",_adXML:t.vastxml});else{if("string"==typeof t.schedule)return i.setVMAP(t.schedule),i;if("string"==typeof t.adschedule)return i.setVMAP(t.adschedule),i;!function(u,h){var p=h.schedule||h.adschedule;if(!p)return;Object.keys(p).forEach(function(t){var e=p[t];e.ad&&(Wt(e,e.ad),delete e.ad);var i=function(t){if("start"===t||"0%"===t||!t&&0!==t)return"pre";if("end"===t||"100%"===t)return"post";if("pre"===t||"post"===t||-1<zt._.indexOf(t,"%"))return t;var e=zt.utils.seconds(t);if("number"==typeof e)return e;return!1}(e.offset),r=M(e.requestTimeout,Ct),n=M(e.creativeTimeout,St),a={_offSet:i,_type:e.type,_breakId:t,requestTimeout:r,creativeTimeout:n};!1===i&&zt.utils.log("Error: ad offset format not supported",i);var s=e.skipoffset||h.skipoffset;void 0!==s&&(a.skipoffset=s);var o=e.adbreakid;o&&(a.adbreakid=o);var d=e.adtagid;if(d&&(a._adTagQueue=V(d)),e.tag){var l=function(t,e){if(!e)return t;var i=0<=t.indexOf("?")?"&":"?",r="cust_params=",n=t.indexOf(r),a=r.length,s="",o="";if(zt.utils.foreach(e,function(t,e){s=""+s+o+t+"="+e,o="&"}),s=encodeURIComponent(s),0<=n){var d=t.substr(0,n+a),l=t.substr(n+a);return""+d+s+"%26"+l}return""+t+i+"cust_params="+s}(e.tag,e.custParams);a._adQueue=V(l),a._waterfallIndex=0}else{if("string"!=typeof e.vastxml)return void zt.utils.log("Error: no ad tag provided");a._adXML=e.vastxml}switch(i){case"pre":u.setPreRoll(a);break;case"post":u.setPostRoll(a);break;default:u.addMidRoll(a)}})}(i,t)}return i.sort(),i},t.prototype.getOptParams=function(t){var e={cuetext:t.cuetext||"Advertisement",dynamicMessage:t.admessage||"This ad will end in xx",podMessage:t.podmessage||"Ad __AD_POD_CURRENT__ of __AD_POD_LENGTH__. ",skipoffset:t.skipoffset||-1,skipMessage:t.skipmessage||"Skip ad in xx",skipText:t.skiptext||"Skip",vpaidcontrols:t.vpaidcontrols||!1,conditionaladoptout:t.conditionaladoptout||!1,requestFilter:t.requestFilter,trackingFilter:t.trackingFilter},i=t.companiondiv;return i&&(e.companion={id:i.id,height:i.height,width:i.width}),e},t.prototype.getAdRules=function(t){var e=t.rules||{},i=parseInt(e.frequency,10);return{startOn:e.startOn||1,frequency:isNaN(i)?1:i,timeBetweenAds:e.timeBetweenAds||0,startOnSeek:e.startOnSeek||null}},t}();function V(t){return"string"==typeof t?[t]:Array.isArray(t)?t.slice(0):t}function M(t,e){return 0===t?1/0:t||e}var L=document.createElement("img"),B=document.createElement("img");L.src=B.src='data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><circle cx="32" cy="32" r="32" fill="%23191919"/><line stroke="%23CCC" stroke-width="6" x1="32" y1="20" x2="32" y2="44"/><line stroke="%23CCC" stroke-width="6" x1="20" y1="32" x2="44" y2="32"/></svg>',L.className="jw-vast-nonlinear-open-button",B.className="jw-vast-nonlinear-close-button";var H={cursor:"pointer",position:"absolute",margin:"auto",left:0,right:0,bottom:0,display:"block"},O="opacity 0.2s",j={"-webkit-transition":O,transition:O};function q(t,e){zt.utils.style(t,{opacity:e||1})}function F(t){zt.utils.style(t,{opacity:0})}function D(){q(B)}function N(){q(B,.75)}function U(){q(L)}function Q(){q(L,.5)}var X=function(){function a(t,e,i,r,n){y(this,a),this.player=t,this.environment=t.getEnvironment(),this.div=r,this.staticURL=e,this.clickURL=i,this.loadTimer=-1,this.animationTimer=-1,this.banner=null,Wt(this,t.Events),this.banner=document.createElement("img"),this.banner.className="jw-banner",this.banner.id=this.player.id+"_vast_static",F([B,L]),this.remove(L),this.div.appendChild(this.banner),this.div.appendChild(B),this.loadTimer=setTimeout(this.imageLoadError.bind(this),n),this.banner.onerror=this.imageLoadError.bind(this),this.banner.onload=this.onLoaded.bind(this),this.banner.src=this.staticURL}return a.prototype.onLoaded=function(){clearTimeout(this.loadTimer),0!==this.banner.naturalWidth?(this.removeBannerEventListeners(),zt.utils.style(B,{top:-this.banner.height-8,bottom:this.banner.height-8,left:this.banner.width},!0),zt.utils.style(L,{top:-16},!0),q([this.div,this.banner]),q(B,.75),new zt.utils.UI(this.banner).on("click tap",this.sendClick.bind(this)),this.environment.OS.mobile&&(this.div.onmouseover=D,this.div.onmouseout=N),B.onclick=B.ontouchstart=this.collapse.bind(this),L.onclick=L.ontouchstart=this.expand.bind(this),this.trigger(c)):this.imageLoadError()},a.prototype.imageLoadError=function(){clearTimeout(this.loadTimer),this.trigger(f),this.removeBanner()},a.prototype.sendClick=function(){this.trigger(s)},a.prototype.collapse=function(t){var e=this;-1===this.animationTimer&&(t.preventDefault(),this.div.onmouseover=this.div.onmouseout=null,F([this.banner,B,L]),this.div.appendChild(L),this.animationTimer=setTimeout(function(){e.remove(e.banner),e.remove(B),q(L,.5),e.div.onmouseover=U,e.div.onmouseout=Q,e.animationTimer=-1},250))},a.prototype.expand=function(t){var e=this;-1===this.animationTimer&&(t.preventDefault(),this.div.onmouseover=this.div.onmouseout=null,this.div.appendChild(this.banner),this.div.appendChild(B),this.animationTimer=setTimeout(function(){q([e.banner,B]),e.div.onmouseover=D,e.div.onmouseout=N,e.animationTimer=-1},50),F(L))},a.prototype.remove=function(t){this.div.contains(t)&&this.div.removeChild(t)},a.prototype.removeBannerEventListeners=function(){this.banner.onload=this.banner.onerror=null},a.prototype.removeBanner=function(){this.removeBannerEventListeners(),this.remove(this.banner)},a.prototype.removeListeners=function(){clearTimeout(this.loadTimer),clearTimeout(this.animationTimer),this.div.onmouseover=this.div.onmouseout=B.onclick=L.onclick=null,this.off(),this.removeBannerEventListeners()},a.prototype.stop=function(){F([this.div,this.banner,B,L]),setTimeout(this.removeBanner.bind(this),400),this.remove(B),this.remove(L)},a}(),re=function(){function i(t,e){y(this,i),this.player=t,this.div=e,this.startTime=0,this.minDur=0,this.environment=t.getEnvironment(),Wt(this,t.Events),this.type="static",t.on("time",this.dispatchTime,this)}return i.prototype.playAd=function(t,e,i,r,n){this.minDur=zt.utils.seconds(i),this.adTag=r,this.static&&(this.static.removeListeners(),this.static.stop()),this.div.style.opacity=0,this.div.style.visibility="visible";var a=this.environment.Browser.firefox?{}:j;zt.utils.style(this.div,zt.utils.extend({top:"",position:"absolute",width:"100%"},a)),zt.utils.style([B,L],Wt({width:"18px",height:"18px",opacity:.75},H,a)),zt.utils.style(B,{transform:"rotate(45deg)"}),this.static=new X(this.player,t,e,this.div,n),this.static.on(c,this.startAd,this),this.static.on(s,this.clickHandler,this),this.static.on(f,this.errorHandler,this)},i.prototype.dispatchTime=function(t){this.trigger(e,t)},i.prototype.startAd=function(){this.startTime=this.player.getPosition(),0<this.minDur&&(0===this.startTime?this.on(e,this.startTimingAd,this):this.on(e,this.timeAd,this)),this.sendEvent(c)},i.prototype.startTimingAd=function(t){this.startTime=t.position,this.off(e,this.startTimingAd,this),this.on(e,this.timeAd,this)},i.prototype.timeAd=function(t){t.position-this.startTime>this.minDur&&(this.off(e,this.timeAd,this),this.stop())},i.prototype.clickHandler=function(){this.sendEvent(s)},i.prototype.errorHandler=function(){this.sendEvent(f)},i.prototype.sendEvent=function(t,e){(e=e||{}).tag=e.tag||this.adTag,this.trigger(t,e)},i.prototype.removeEvents=function(){this.off()},i.prototype.getState=function(){return Bt},i.prototype.stop=function(){this.startTime&&this.static&&(this.startTime=0,this.minDur=0,this.off(e,this.startTimingAd,this),this.off(e,this.timeAd,this),this.static.removeListeners(),this.static.stop(),this.sendEvent(m))},i.prototype.pause=function(){},i}();function ne(t,e,i){var r=Gt(e,1002,11002);r.id=i,t.push(r)}function ae(){var t=new Error("No AdBreaks in VMAP");throw t.adErrorCode=60005,t}var W=function(){function e(t){y(this,e),this._parsedAds=[],this._error=null,this._version=null,t&&this.parse(t)}return e.prototype.parsedAds=function(){return this._parsedAds},e.prototype.error=function(){return this._error},e.prototype.version=function(){return this._version},e.prototype.parse=function(i,r){var n=this,t=void 0,a=void 0;"VAST"===i.nodeName?t=i:(t=se(i,"VAST")[0])||(t=se(i,"VideoAdServingTemplate")[0]),t||this.throwError(101,"Invalid VAST response"),a="VideoAdServingTemplate"===t.tagName?1:parseFloat(oe(t,"version")||0),this._version=a;var e,s=se(t,"Ad"),o=zt._.map(s,function(t){var e=n.parseAd(a,t);return e.vastversion=a,e.response=i,e.request=r||null,e});this._parsedAds=o,this._parsedAds.length||(e=se(t,"Error"),zt._.each(e,function(t){var e=le(t).replace(d,303),i=new Image;i.src=e}))},e.prototype.parseAd=function(t,e,i){i=i||{};var r,n,a,s,o=se(e,"InLine")[0],d=se(e,"Wrapper")[0],l=o||d,u=l?le(se(l,"AdTitle")[0]):"",h=void 0;return i.sequence=oe(e,"sequence"),i.adTitle=u,(!t||4<t||t<2)&&this.throwError(102,"Vast version not supported"),4===t&&(i.conditionalAd=!!oe(e,"conditionalAd")),l?(2<=t?($(l,"Impression",(h=function(t){var e=se(se(t,"Creatives")[0],"Creative"),P={},w={trackers:P};w.adsystem=le(se(t,"AdSystem")[0]);var i=se(t,"Category");return w.categories=zt._.map(i,function(t){return le(t)}),zt._.each(e,function(t){var e=se(t,"Linear")[0],i=se(t,"NonLinear")[0],r=se(se(t,"TrackingEvents")[0],"Tracking"),n=se(t,"UniversalAdId")[0],a=oe(n,"idRegistry")||"unknown",s=oe(n,"idValue")||"unknown";w.creativeId=oe(t,"id"),e||i?(zt._.each(r,function(t){de(P,t)}),w.universalAdIdRegistry=a,w.universalAdIdValue=s):(w.companionUniversalAdIdRegistry=a,w.companionUniversalAdIdValue=s);var o,d,l,u,h,p,c,f=le(se(t,"AdParameters")[0]);if(f&&(w.adParams=f),e){var m=se(e,"VideoClicks")[0],v=le(se(m,"ClickThrough")[0]),g=se(m,"ClickTracking"),y=oe(e,"skipoffset"),A=le(se(e,"Duration")[0]);zt._.each(g,function(t){z(P,"click",le(t))}),A&&(w.duration=zt.utils.seconds(A)),v&&(w.clickthrough=v),y&&(w.skipoffset=y),G(e,w)}else if(i){var k=le(se(i,"NonLinearClickThrough")[0]);k&&(w.clickthrough=k),h=w,p=[],(c=se(u=t,"StaticResource")[0])&&(p.push({type:oe(c,"creativeType"),file:le(c),adType:oe(se(u,"NonLinear")[0],"apiFramework")||"static",minDuration:oe(se(u,"NonLinear")[0],"minSuggestedDuration")||"00:00:00"}),h.media=p)}else o=w,d=se(se(t,"CompanionAds")[0],"Companion"),l=o.companions?o.companions:[],zt._.each(d,function(t){var e=se(t,"StaticResource")[0],i=se(t,"IFrameResource")[0],r=se(t,"HTMLResource")[0],n={},a=void 0,s=void 0;if(e)a=oe(e,"creativeType"),s=le(e);else if(i)a="iframe",s=le(i);else{if(!r)return;a="html",s=le(r)}var o=se(se(t,"TrackingEvents")[0],"Tracking");zt._.each(o,function(t){var e=oe(t,"event");z(n,e,le(t))});var d=le(se(t,"CompanionClickThrough")[0]);l.push({width:parseInt(oe(t,"width"),10),height:parseInt(oe(t,"height"),10),type:a,source:s,trackers:n,clickthrough:d})}),o.companions=l}),w}(l)).trackers),$(l,"Error",h.trackers)):h=function(t){var e=se(t,"Video")[0]||t,i=se(t,"NonLinear")[0],r={},n={trackers:r};if(e){var a=se(se(t,"TrackingEvents")[0],"Tracking");zt._.each(a,function(t){de(r,t)});var s=se(se(t,"Impression")[0],"URL");zt._.each(s,function(t){z(r,"impression",le(t))});var o=se(se(t,"Error")[0],"URL");zt._.each(o,function(t){z(r,"error",le(t))});var d=se(e,"VideoClicks")[0],l=le(se(d,"ClickThrough")[0]),u=se(se(d,"ClickTracking")[0],"URL");zt._.each(u,function(t){z(r,"click",le(t))}),l&&(n.clickthrough=l),G(e,n);var h=se(e,"AdParameters")[0];if(h){var p=oe(h,"apiFramework");"vpaid"===p.toLowerCase()&&(zt._.each(n.media,function(t){t.adType=p}),n.adParams=le(h))}}if(i){var c=n.media||[],f=se(i,"URL")[0];c.push({type:oe(i,"creativeType"),file:le(f),adType:oe(i,"apiFramework")}),n.media=c}var m=se(t,"CompanionAds")[0];return m=se(m,"Companion"),n.companions=(n.companions||[]).concat(zt._.map(m,function(t){return{width:parseInt(oe(t,"width"),10),height:parseInt(oe(t,"height"),10),type:oe(t,"resourceType"),resource:le(se(t,"URL")[0]),trackers:[],clickthrough:""}})),n}(l),a=h,s={},zt._.each(a.media,function(t){var e=t.type,i="application/x-mpegURL"===e||"vnd.apple.mpegURL"===e;"vpaid"===t.adType.toLowerCase()||i||(s[e]=s[e]||0,s[e]++)}),a.mediaFileCompliance=!0,zt._.each(s,function(t,e){t<3&&(a.mediaFileCompliance=!1,a.nonComplianceReasons=a.nonComplianceReasons||[],a.nonComplianceReasons.push(e+" has only "+t+" qualities"))}),d&&(h.wrappedURI=le(se(d,"VASTAdTagURI")[0])||le(se(d,"VASTAdTagURL")[0])),r=h,n=Wt({},i),zt.utils.foreach(r,function(t,e){zt.utils.exists(n[t])?Array.isArray(e)?n[t]=n[t].concat(e):"object"===zt.utils.typeOf(e)?n[t]=Wt(n[t],r[t]):n[t]=e:n[t]=e}),h=n):2===t?this.throwError(900,"Invalid VAST response",60001):this.throwError(101,"Invalid VAST response",10101),h},e.prototype.throwError=function(t,e,i){var r=this,n=Gt(e,t,i=i||1e4+t);throw n.toString=function(){return r.code+" "+r.message},this._error=n,this._error},e}();function se(t,e,i){var r=[];return t&&(r=t.getElementsByTagName(e),i&&r&&0===r.length&&(r=t.getElementsByTagName(i+":"+e))),r}function oe(t,e){return t?t.getAttribute(e):null}function de(t,e){var i=oe(e,"event");"progress"===i&&(i=i+"_"+oe(e,"offset"));z(t,i,le(e))}function le(t){if(t){var e=t.textContent||t.text;if(e)return zt.utils.trim(e)}return""}function z(t,e,i){t[e]||(t[e]=[]),i&&t[e].push(i)}function $(t,e,i){var r=se(t,e);zt._.each(r,function(t){z(i,e.toLowerCase(),le(t))})}function G(t,e){var i=se(se(t,"MediaFiles")[0],"MediaFile"),r=e.media?e.media:[];e.media=r.concat(zt._.map(i,function(t){return{type:oe(t,"type"),file:le(t),adType:oe(t,"apiFramework")||"",width:parseInt(oe(t,"width"),10)||0,height:parseInt(oe(t,"height"),10)||0}}).filter(function(t){return t.file}))}var ue=function(){function d(t,e,i,r){y(this,d),this._scheduledAd=t,this.player=e,this.options=i||{},this.debugTrackFn=r,Wt(this,e.Events),this._history=[],this.loadedAds=[],this.parser=null,this.promise=null,this.xmlhttp=null}return d.prototype.load=function(e){var i=this;if(null===this.promise){this._history.push(e);var r=this.options.requestFilter;this.promise=new Promise(function(t,n){i.xmlhttp=zt.utils.ajax({url:e,withCredentials:!0,retryWithoutCredentials:!0,requireValidXML:!0,timeout:i._scheduledAd.requestTimeout,requestFilter:r},t,function(t,e,i,r){return n(r)})}).catch(function(t){if(null!==i.player)throw i.ajaxError(t,e)}).then(function(t){if(null!==i.player)return i.parseXMLString(t.responseXML||t.responseText,e)})}return this.promise},d.prototype.destroy=function(){var t;(t=this.xmlhttp)&&(t.onload=null,t.onreadystatechange=null,t.onerror=null,t.abort&&t.abort()),this.player=null,this.xmlhttp=null},d.prototype.scheduledAd=function(){return this._scheduledAd},d.prototype.allAds=function(){return this.loadedAds},d.prototype.adPod=function(){var e=[];return this.loadedAds.forEach(function(t){t.sequence&&e.push(t)}),e.sort(function(t,e){return t.sequence-e.sequence}),e},d.prototype.adBuffet=function(){var e=[];return this.loadedAds.forEach(function(t){t.sequence||e.push(t)}),e},d.prototype.history=function(){return this._history},d.prototype.parseXMLString=function(i,a){var o=this;return null===this.parser&&(this.parser=new W),new Promise(function(t){var e=function(t){if(e=t,"object"==typeof Node?e instanceof Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName)return t;var e;return zt.utils.parseXML(t)}(i);return o.parser.parse(e,o.xmlhttp),t(o.parser.parsedAds())}).catch(function(t){if(null!==o.player){var e=t.code||900,i=t.adErrorCode||1e4+e;throw o.sendErrorEvent(t.message,e,i,a)}}).then(function(t){if(null===o.player)return null;if(0===t.length){var e=2===o.parser.version(),i=e?900:101,r=e?60001:10101;throw o.sendErrorEvent("Ad Tag Empty",i,r,a)}o.loadedAds=t,o.options.wrapper=o.options.wrapper||[],o.options.adsystem&&o.options.wrapper.push(o.options.adsystem),o.options.adsystem=o.loadedAds[0].adsystem;var n=[];return t.forEach(function(s){if(s.wrappedURI){o.options.wrappedTags=o.options.wrappedTags||[o._scheduledAd._currentTag],o.options.wrappedTags.push(s.wrappedURI);var t=new d(o._scheduledAd,o.player,o.options,o.debugTrackFn).load(s.wrappedURI).then(function(t){var n,e,a,i=(n=s,e=t.allAds(),a=[],zt.utils.foreach(e,function(t,e){var i,r;n.companions&&(e.companions=(e.companions?e.companions:[]).concat(n.companions)),n.trackers&&(e.trackers=(i=e.trackers,r=n.trackers,i=i||{},zt.utils.foreach(r,function(t,e){i[t]?i[t]=i[t].concat(e):i[t]=e}),i)),n.sequence&&(e.sequence=n.sequence),a.push(e)}),a),r=o.loadedAds.indexOf(s);Array.prototype.splice.apply(o.loadedAds,[r,1].concat(i))}).catch(function(t){var e=o.sendAdpodErrorEvent(t.message,t.code,t.adErrorCode,t.url),i=o.loadedAds.indexOf(s);if(o.loadedAds.splice(i,1),t.vloader.destroy(),e.type!==Ht)throw e;o.trigger(Ht,e)});n.push(t)}else 1<o.options.wrapper.length&&(s.wrapper=o.options.wrapper,s.wrappedTags=o.options.wrappedTags)}),Promise.all(n)}).then(function(){if(null===o.player)return null;var e=o.loadedAds.slice(0),t=e.length;e.forEach(function(t){t.media&&t.media.length||e.length--});var i=0===t,r=e.length!==t;if(i||r)throw o.sendErrorEvent("Ad Tag Empty",101,10101,o._history[o._history.length-1]);return o})},d.prototype.ajaxError=function(t,e){if(this.player.getAdBlock())return this.sendErrorEvent("Ad playback blocked by an ad blocker",900,60003,e);var i=t.code;if(601===i||602===i)return this.sendErrorEvent("Invalid XML",100,10100,e);if(1===i||404===i)return this.sendErrorEvent("VAST could not be loaded",301,10301,e);var r=this.options.wrappedTags&&this.options.wrappedTags.length,n=r?303:900,a=r?10303:60006;return this.sendErrorEvent(t.message||"Error loading file",n,a,e)},d.prototype.firstUrl=function(){return this._history&&this._history.length?this._history[0]:""},d.prototype.sendAdpodErrorEvent=function(t,e,i,r){if(1===this.loadedAds.length)return this.sendErrorEvent(t,e,i,r);var n=Gt(t,e,i);return n.type=Ht,n.vloader=this,n.url=this.firstUrl()||r,this.wrappedTags=r,n},d.prototype.sendErrorEvent=function(t,e,i,r){var n=Gt(t,e,i);return n.vloader=this,n.url=this.firstUrl()||r,this.options.wrappedTags&&(n.wrapperAdSystem=this.options.wrapper||"",n.wrappedTags=this.options.wrappedTags),n.adsystem=this.options.adsystem||"",this.trackError(n),n},d.prototype.trackError=function(t){var e=t.vloader.allAds();if(e&&e.length){var i=e[0];if(i){var r=i.trackers;if(r&&r.error)new $t(r,this.debugTrackFn,this.player,this.options.trackingFilter).error(t.code)}}},d}();var he=function(){function i(t,e){y(this,i),this.player=t,this.options=e,this.ignoreStartOnSeek=!1,this.reset(),e.timeBetweenAds&&t.on({adBreakStart:this.handleAdBreakStart,adSkipped:this.handleAdSkipped,adComplete:this.handleAdComplete,adBreakEnd:this.handleAdBreakEnd,destroyPlugin:this.destroy},this)}return i.prototype.clearStartOnSeek=function(){this.ignoreStartOnSeek=!0},i.prototype.sendAdBreakIgnored=function(t,e){var i,r;t&&this.player.trigger(a,(r=e,{id:(i=t)._breakId,tag:i._adQueue&&0<i._adQueue.length?i._adQueue[0]:i._adXML,client:_t,offset:i._offSet,timeSinceLastAd:r,type:a}))},i.prototype.rulesAllowAdPlayback=function(t){var e=this.options,i=0===e.frequency&&1===t,r=t>=e.startOn&&(t-e.startOn)%e.frequency==0;return i||r},i.prototype.handleAdBreakStart=function(){this.adSkipped=!1,this.adComplete=!1},i.prototype.handleAdComplete=function(){this.adComplete=!0},i.prototype.handleAdSkipped=function(){this.adSkipped=!0},i.prototype.handleAdBreakEnd=function(){!this.adSkipped&&this.adComplete&&(this.recentCompletedAdTime=te())},i.prototype.timeBetweenAdsAllowsAdPlayback=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:te();if(this.options.timeBetweenAds){var i=(e-this.recentCompletedAdTime)/1e3;if(i<this.options.timeBetweenAds)return this.sendAdBreakIgnored(t,i),!1}return!0},i.prototype.reset=function(){this.ignoreStartOnSeek=!1,this.recentCompletedAdTime=0},i.prototype.destroy=function(){this.player.off(null,null,this)},A(i,[{key:"timeBetweenAds",get:function(){return this.options.timeBetweenAds}},{key:"startOnSeek",get:function(){return this.ignoreStartOnSeek?null:this.options.startOnSeek}}]),i}(),J={};function pe(t,r){var n=this,e=J[r];return e||(this.jwplayerEntitlements=function(t,e,i){var r={canPlayAds:!0},n=new t.key(e),a=n.edition();if("unlimited"===a)return i(r);var s=n.token(),o=["//","entitlements.jwplayer.com","/",s,".json"];"file:"===window.location.protocol&&o.unshift("https:"),t.ajax(o.join(""),function(t){r.canPlayAds=!t||!t.response||!1!==t.response.canPlayAds,i(r)},function(){i(r)},{timeout:1e4,responseType:"json"})},J[r]=new Promise(function(e,i){n.jwplayerEntitlements(t,r,function(t){t.canPlayAds?e():i({message:"Ad Limit Reached"})})}))}var K,Y=/^((https?:)?\/\/)?(secure)?pubads\.g\.doubleclick\.net\/gampad\/ads\?[\S]*$/,Z=/^((https?:)?\/\/)?bid\.g\.doubleclick\.net\/dbm\/vast\?[\S]*$/,tt=/^((https?:)?\/\/)?ad\.doubleclick\.net(\/ddm)?\/pfadx\/[\S]*$/;function ce(t,e,i,r){if(!t)return t;var n,a,s,o,d,l=(a=(n=e).getConfig(),{playerHeight:n.getHeight()||a.height||"",playerWidth:n.getWidth()||a.width||"",itemDuration:(s=n.getDuration(),o=3,d=Math.pow(10,o),Math.round(s*d)/d||""),item:a.playlist[n.getPlaylistIndex()]||{}}),u=l.item,h=window.location.href;t=et(t=et(t=et(t=et(t=et(t=et(t=et(t=et(t,"__random-number__",Math.random()*Math.pow(10,18)),"__timestamp__",(new Date).getTime()),"__page-url__",encodeURIComponent(h)),"__referrer__",encodeURIComponent(document.referrer)),"__player-height__",l.playerHeight),"__player-width__",l.playerWidth),"__item-duration__",l.itemDuration),"__domain__",encodeURIComponent(i));for(var p=(t=r.companion?et(t,"__companion-div__",r.companion.id):et(t,"__companion-div__","")).match(new RegExp(/__item-[a-z 0-9 A-Z]*__/g)),c=0;p&&c<p.length;c++){var f=p[c],m=f.substring(7,f.length-2);if(u.hasOwnProperty(m)&&"string"==typeof u[m]){var v=u[m];1e3<v.length&&(v=v.substring(0,1e3)),t=et(t,f,encodeURIComponent(v))}else t=et(t,f,"")}return t=function(t,e,i){Y.test(t)?t=t+"&sdk3p=jwplayer&vpa="+e+"&vpmute="+i:Z.test(t)?t+="&sdk3p=jwplayer":tt.test(t)&&(t+=";sdk3p=jwplayer");return t}(t,e.getConfig().autostart?1:0,e.getMute()?1:0)}function et(t,e,i){return t.replace(e,i)}var it=2e3,rt=2e3,nt="usd",at=1,st="//c.amazon-adsystem.com/aax2/apstag.js",ot="video",dt="2962993",lt="//js-sec.indexww.com/htv/htv-jwplayer.min.js",ut="//js.spotx.tv/directsdk/v1/",ht="//search.spotxchange.com/ad/vast.html?key=",pt="dfp",ct="jwp",ft="jwpspotx",mt="jwpdfp",vt=ct,gt="APS",yt="Index",At="SpotX",kt=((K={})[[pt]]=[gt,"FAN",yt,At],K[[ct]]=["FAN",At],K[[mt]]=[At],K[[ft]]=[At],K),Pt="bid",wt="error",Tt="invalid",bt="noBid",fe=Date.now||function(){return(new Date).getTime()};function me(n,a){return new Promise(function(e,t){setTimeout(t,a);var i=document.createElement("script");i.onload=i.onreadystatechange=function(t){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(e(t),i.onload=i.onreadystatechange=null,r&&i.parentNode&&r.removeChild(i))},i.onerror=t,i.type="text/javascript",i.charset="utf-8",i.async=!0,i.timeout=a,i.src=n;var r=document.getElementsByTagName("head")[0]||document.documentElement;r.insertBefore(i,r.firstChild)}).catch(function(){return Promise.reject("Error loading script")})}var ve=encodeURIComponent(window.location.href),ge={requestBids:function(t,p,i){var c=t.id,r=(e=c,n=p.playerWidth,a=p.playerHeight,["https://an.facebook.com/v2/placementbid.json?&placementids[]="+e,"&playerwidth="+n,"&playerheight="+a,"&adformats[]="+ot,"&sdk="+dt,"&pageurl="+ve].join(""));var e,n,a;if(!function(t,e,i,r){if(!r)return!1;return t===pt||e&&i===nt}(p.mediationLayerAdServer,p.floorPriceCents,p.floorPriceCurrency||nt,r))return Promise.resolve({result:Tt,message:"Invalid configuration"});return new Promise(function(t){var e=new XMLHttpRequest;e.onreadystatechange=function(){4===this.readyState&&(t(this),e=null)},e.open("GET",r),e.withCredentials=!0,e.send(null),i.then(function(){e&&(e.abort(),e=null)})}).then(function(t){if(200!==t.status)return{result:wt,message:"Invalid response (status "+t.status+")"};var e=JSON.parse(t.responseText),i=e.errors;if(i&&i.length)return{result:wt,message:i[0]};var r=e.bids;if(!r||!r[c]||!r[c][0])return{result:bt,message:"No bids for placement id"};var n=r[c][0],a=n.bid_price_cents,s=n.bid_id;if(p.mediationLayerAdServer===pt)return{result:Pt,tag:p.tag,custParams:{jwFANBidPrice:Math.round(a/100),jwFANBidID:s}};var o,d,l,u,h={result:Pt,priceInCents:a,priceCurrency:n.bid_price_currency};return a>=p.floorPriceCents&&(h.tag=(o=c,d=s,l=p.playerWidth,u=p.playerHeight,["https://an.facebook.com/v1/instream/vast.xml?placementid="+o,"&playerwidth="+l,"&playerheight="+u,"&sdk="+dt,"&bidid="+d,"&pageurl="+ve].join(""))),h}).catch(function(t){return{result:wt,message:"FAN header bidding failed: "+t}})},getCustomResponse:function(){return{}}};var ye=null;function Ae(){return null===ye&&(ye=Promise.resolve(window.apstag).then(function(t){return t&&t.init&&t.fetchBids?t:me(["file"===document.location.protocol?"https:":"",st].join(""),rt).then(function(){return window.apstag})}).catch(function(t){throw ye=null,t})),ye}var ke=null,Pe=null;function we(t){if(null===Pe){var e=fe(),i=ke||window.SpotX;if(i&&i.DirectAdOS)return Pe=Promise.resolve({SpotX:i,loadingTime:fe()-e});var r=["file"===document.location.protocol?"https:":"",ut,t,".js"].join("");(Pe="function"==typeof require?(n=r,a=rt,new Promise(function(t,e){setTimeout(e,a),require([n],t,e)}).catch(function(){return Promise.reject("Error loading script")})).then(function(t){return{SpotX:ke=t,loadingTime:fe()-e}}):me(r,rt).then(function(){return{SpotX:window.SpotX,loadingTime:fe()-e}})).catch(function(t){throw Pe=null,t})}var n,a;return Pe}var Te=void 0,be={requestBids:function(t,l){if(!t.id)return Promise.resolve({result:Tt,message:"Missing id in configuration"});var a=Wt({channel_id:t.id,slot:l.playerContainer,content_width:l.playerWidth,content_height:l.playerHeight,player_vendor:"SpotXJW",player_vendor_id:l.playerId,ad_volume:l.adVolume,autoplay:l.autoplay,blocked_autoplay_override_mode:l.autoplayAdsMuted,start_delay:function(t){if("start"===t||"0%"===t||!t||"pre"===t||"00:00:00"===t)return 0;if("end"===t||"100%"===t||"post"===t)return-2;if("string"==typeof t&&0<=t.indexOf("%"))return-1;var e=parseInt(t);return 0<e?e:-1}(l.offset),placement:1,hide_skin:!0},t.optionalParams);t.passFloorPrice&&l.floorPriceCents&&(a.price_floor=l.floorPriceCents/100);return we(t.id).then(function(t){var e=t.SpotX,i=t.loadingTime;Te=i;var r=new e.DirectAdOS(a),n=fe();return r.getAdServerKVPs().then(function(t){return{response:t,bidNetworkStartTime:n}})}).then(function(t){var e=t.response,i=t.bidNetworkStartTime,r=fe()-i,n=e.spotx_ad_key,a={spotx_bid:e.spotx_bid,spotx_ad_key:n},s=100*parseFloat(e.spotx_bid),o={result:Pt,priceInCents:s,custParams:a,scriptLoadingTime:Te,bidNetworkResponseTime:r};if(l.mediationLayerAdServer===pt)return o;var d=["file:"===document.location.protocol?"https:":"",ht,n].join("");return Wt(o,{tag:d,tagKey:n})}).catch(function(t){return"SpotX :: Unable to find ad"===t.message?{result:bt,message:t.message,scriptLoadingTime:Te}:{result:wt,message:"SpotX header bidding failed: "+t,scriptLoadingTime:Te}})},getCustomResponse:function(){return{scriptLoadingTime:Te}}};var _e=null;function Ee(e){return null===_e&&(_e=Promise.resolve(window.indexapi).then(function(t){return t||me(["file"===document.location.protocol?"https:":"",e||lt].join(""),rt).then(function(){return window.indexapi})}).catch(function(t){throw _e=null,t})),_e}var Ie,Ce={requestBids:function(t,r){if(!t.id&&!t.script)return Promise.resolve({result:Tt,message:"Missing id or script in configuration"});var e=Wt({videoCommonArgs:{protocols:[2,3,5,6],mimes:["video/mp4","video/webm","application/javascript"],apiList:[1,2]},siteID:t.id},t);return Ee().then(function(t){return new Promise(function(i){t.deferQueue=t.deferQueue||[],t.deferQueue.push(function(){t.solicitIndexVideoAds(r.tag,function(t,e){i({updatedTag:t,indexTargeting:e})},e)})})}).then(function(t){var e=t.indexTargeting;return void 0!==e?{result:Pt,tag:r.tag,custParams:e}:{result:bt,message:"No bids for site id"}}).catch(function(t){return{result:wt,message:"Index Exchange header bidding failed: "+t}})},getCustomResponse:function(){return{}}};var Se=((Ie={})[[gt]]={requestBids:function(i,r){if(!i.id||!i.slotID)return Promise.resolve({result:Tt,message:"Missing id or slotID in configuration"});return Ae().then(function(e){return e.init({id:i.pubId,adServer:i.adServer}),new Promise(function(t){e.fetchBids({slots:[{slotID:i.slotID}],timeout:r.bidTimeout},t)})}).then(function(t){return t&&t[0]&&t[0].slotID===i.slotID?{result:Pt,tag:r.tag,custParams:{amznbid:t[0].amznbid,amzniid:t[0].amzniid}}:{result:bt,message:"No bids for pubID and slotID"}}).catch(function(t){return{result:wt,message:"Amazon header bidding failed: "+t}})},getCustomResponse:function(){return{}}},Ie[["FAN"]]=ge,Ie[[yt]]=Ce,Ie[[At]]=be,Ie);var xe=function(){function h(){var t,e,i,r,n=this,a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},s=a.settings,o=void 0===s?{}:s,d=a.bidders,l=void 0===d?[]:d,u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(y(this,h),this.settings=(t=o,i=Wt({bidTimeout:it,offset:"",playerContainer:(e=u).container,playerHeight:e.height||0,playerWidth:e.width||0,tag:""},e,t),kt[i.mediationLayerAdServer]||(i.mediationLayerAdServer=vt),i.mediationLayerAdServer===ft&&(i.floorPriceCents=at),i),this.bidders=l.reduce(function(t,e){return e.name&&(t[e.name]=Wt(e,e.custom_params)),t},{}),"pre"!==this.settings.offset&&0!==parseInt(this.settings.offset))&&(this.bidders=this.bidders[At]?((r={})[[At]]=this.bidders[At],r):{});this.bidders[gt]&&this.bidders[gt].id&&this.bidders[gt].slotID&&Ae(),this.bidders[yt]&&(this.bidders[yt].script||this.bidders[yt].id)&&Ee(this.bidders[yt].script),this.bidders[At]&&this.bidders[At].id&&we(this.bidders[At].id),this._bidRequest=null,this._currentTimeout=null,this._onCancelTrigger=null,this.onCancel=new Promise(function(t){n._onCancelTrigger=t})}return h.prototype.start=function(){var t,n,o,e,i;return this._bidRequest||(this._bidRequest=(t={config:this.bidders,settings:this.settings,onCancel:this.onCancel},n=t.config,o=t.settings,e=t.onCancel,i=kt[o.mediationLayerAdServer].filter(function(t){return n[t]}).map(function(i){var r=fe();return Promise.race([Se[i].requestBids(n[i],o,e),e]).then(function(t){var e=Se[i].getCustomResponse();return Wt({},n[i],t,e,{timeForBidResponse:fe()-r|0})})}),Promise.all(i).then(function(t){var e=o.mediationLayerAdServer===pt||o.mediationLayerAdServer===mt,i=o.mediationLayerAdServer===ct||o.mediationLayerAdServer===mt||o.mediationLayerAdServer===ft,r={priceInCents:o.floorPriceCents,timeForBidResponse:1/0},n=[],a={},s={};return s.bidders=t.map(function(t){return e||(t.winner=!1),t.result===Pt&&(n.push(t),Wt(a,t.custParams),i&&(t.priceInCents>r.priceInCents||t.priceInCents===r&&t.timeForBidResponse<r.timeForBidResponse)&&(r=s.result=t)),t}),i&&r.name?r.winner=!0:e&&n.length&&(s.result={tag:o.tag,custParams:a}),s}))),this._bidRequest},h.prototype.stop=function(){var e=this;clearTimeout(this._currentTimeout),this._onCancelTrigger({result:"abort"}),this._bidRequest=null,this._currentTimeout=null,this._onCancelTrigger=null,this.onCancel=new Promise(function(t){e._onCancelTrigger=t})},h.prototype.getEventObject=function(t,e,i){var r=i.offset,n=this.settings.mediationLayerAdServer,a=e||[];"pre"!==r&&0!==parseInt(r)&&(a=a.filter(function(t){return t.name===At}));var s={client:t,offset:r,mediationLayerAdServer:n,bidders:a,bidTimeout:this.settings.bidTimeout},o=this.settings.floorPriceCents;o&&n!==ft&&n!==pt&&(s.floorPriceCents=o);var d=this.settings.floorPriceCurrency;return d&&(s.floorPriceCurrency=d),s},h.prototype.then=function(t){return this._bidRequest?this._bidRequest.then(t,t):null},h.prototype.timeout=function(){clearTimeout(this._currentTimeout),this._currentTimeout=setTimeout(this._onCancelTrigger,this.settings.bidTimeout,{result:"timeout"})},h}();(window.jwplayerPluginJsonp||window.jwplayer().registerPlugin)(_t,"8.1",function(s,o,t){var d=zt.utils=s.utils,l=zt._=s._,u=s.getConfig(),e=u.key,r=s.getEnvironment(),a=o.debug&&o.trackFn?o.trackFn:null,i=this,h=[],n=void 0,p={},c=null,f=o.bids&&o.bids.settings?o.bids.settings.mediationLayerAdServer||xt:null;if((f===xt||f===Rt)&&o.bids.bidders){var m=o.bids.bidders;m.length&&(c=Wt({},o.bids,{bidders:m}))}var v={},g=!1,y=!1,A=null,k={},P=null,w=0,T=[],b=[],_=!1,E={},I=void 0,C=void 0,S=void 0,x=void 0,R=void 0,V=void 0,M=null,L=void 0,B=0,H=0,O=!1,j=new ie,q=new he(s,j.getAdRules(o)),F=new jwplayer.utils.Timer,D=new ee(q);this.version="8.4.2";var N=L=j.getSchedule(o,q);function U(a){return V&&(st(V),V=null),M=new Promise(function(t,n){V=d.ajax({url:a,withCredentials:!0,retryWithoutCredentials:!0,requireValidXML:!0,timeout:L.requestTimeout},t,function(t,e,i,r){return n(r)})}).then(function(t){for(var e=function(t,e){var i=[],r=se(t,"VMAP",It);if(!r.length)throw new Error("No VMAP tag in response");oe(r[0],"version")||ne(i,"VMAP Schema Error: version missing from VMAP tag",Et);var n,a,s,o,d,l=se(t,"AdBreak",It);l.length||ae();for(var u=t.lookupNamespaceURI(It),h=0;h<l.length;h++){var p={},c={},f=l[h],m=oe(f,"timeOffset"),v=oe(f,"breakId"),g=oe(f,"breakType"),y=oe(se(f,"AdSource",It)[0],"id"),A=se(f,"AdTagURI",It)[0],k=se(f,"VASTData",It)[0]||se(f,"VASTAdData",It)[0],P=oe(A,"templateType"),w=le(A),T=(a=f,s="Tracking",o=It,d=void 0,d=[],(n=u)||a?d=a.getElementsByTagNameNS?a.getElementsByTagNameNS(n,s):a.getElementsByTagName(o+":"+s):d);if(g||ne(i,"VMAP Schema Error: missing breakType on AdBreak",v),k||P||ne(i,"VMAP Schema Error: missing templateType on AdBreak",v),m||ne(i,"VMAP Schema Error: missing timeOffset on AdBreak",v),p._type=g,p._vmap={id:y,breakid:v,timeoffset:m},k)p._adXML=se(k,"VAST")[0];else{if("vast2"!==P&&"vast3"!==P&&"vast4"!==P)continue;p._adQueue=[w],p._waterfallIndex=0}var b=[];if(T)for(var _=0;_<T.length;_++){de(c,T[_]);var E=oe(T[_],"event");b.push(E)}switch((b.indexOf("breakStart")<0||b.indexOf("breakEnd")<0||b.indexOf("error")<0)&&ne(i,"Tracking events are missing breakStart, breakEnd, or error for AdBreak",v),p._trackers=c,p._type=g,m){case"start":p._offSet="pre",e.setPreRoll(p);break;case"100%":case"end":p._offSet="post",e.setPostRoll(p);break;default:if(/^#/.test(m))break;/^\d\d?(?:\.\d+)?%$/.test(m)?p._offSet=m:p._offSet=zt.utils.seconds(m),e.addMidRoll(p)}}return e.preRoll||e.midRolls.length||e.postRoll||ae(),e.sort(null,!0),i}(t.responseXML,L),i=0;i<e.length;i++){var r=e[i];r.vmap=a,s.trigger(Nt,r)}}).catch(function(t){var e=void 0;if(t.message)e=Gt("VMAP Schema Error: "+t.message,1002,t.adErrorCode||11002);else{var i={1:{code:1007,message:"Timeout"},602:{code:1e3,message:"Invalid XML"},default:{code:1008,message:u.localization.errors[t.key]}},r=i[t.code]||i.default;d.log(r.message),e=Gt("Error Loading VMAP Schedule",r.code,r.code+1e4)}e.id=Et,e.vmap=a,At(e)}).then(function(){V=M=null})}function Q(t){C=t._vmapTracker=X(t),R.once("destroyed",function(){F.clear("adBreakStart"),C.breakEnd(),s.trigger(qt,Kt(s,t._position))}),F.tick("adBreakStart"),C.breakStart(),s.trigger(Ft,Kt(s,t._position))}function X(t){return t._vmapTracker||new $t(t._trackers,a,s,o.trackingFilter)}function W(e,i){if(null===A){var r=L;A=n.then(function(){if(ot(r)){var t=L.getPreRoll(e.startTime);if(t)return t._position="pre",t._id=tt(12),G(t,i)}})}return A}function z(e,i){if(!k[e]){var r=L;k[e]=n.then(function(){if(ot(r)){var t=L.getMidRollAtIndex(e);if(t)return t._position="mid",t._id=tt(12),G(t,i)}})}return k[e]}function $(e,i){if(null===P){var r=L;P=n.then(function(){if(ot(r)){var t=L.getPostRoll(e);if(t)return t._position="post",t._id=tt(12),G(t,i)}})}return P}function G(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(C=t._vmapTracker=X(t),t._preload=o.preloadAds?t._preload||e.preload||!1:null,t._adXML)t._currentTag=t._currentTag||"clientloadedtag_"+w++;else if(!t._adQueue)return void d.log("scheduled ad has no url or xml",t);var i=L,r=t._adXML?function(t){if(t._currentTag=t._currentTag||t._adXML.toString(),O)throw kt(t);var e=nt(t).parseXMLString(t._adXML);return it(t,t._currentTag),e}(t):function(t){var e=(E=t)._waterfallIndex||0,i=t._adQueue[e],r=ce(i,s,wt(),v);if(t._waterfallIndex=e+1,t._currentTag=r,"function"==typeof a&&a({type:"tagReplacement",data:{actualTag:r,originalTag:i}}),O)throw kt(t);var n=nt(t).load(r);return it(t,r),n}(t);return r.then(function(){return ot(i)?et(t):null}).catch(d.noop),r.catch(function(){return ot(i)?et(t):null}),r.catch(function(t){return ot(i)?(at((e=t).vloader),vt(mt(e))):null;var e})}function J(){R||(R=s.createInstream().init()).setText(null)}function K(){if(h.forEach(function(t){return t.stop()}),h=[],p={},c){var t=parseInt(c.bidOnBreaks,10);t=0<t?t:1/0,L.getAllAds().slice(0,t).map(Y)}return Promise.all(h)}function Y(n){var a=new xe(c,{offset:n._offSet,width:s.getWidth(),height:s.getHeight(),container:s.getContainer(),playerId:s.id,autoplay:u.autostart,autoplayAdsMuted:o.autoplayadsmuted,adVolume:s.getVolume()});a.start(),h.push(a);var t=a.getEventObject(_t,c.bidders,{offset:n._offSet});return t.adBreakId=n._breakId,s.trigger(Ot,t),a.then(function(t){var e=t.bidders,i=t.result;i&&!i.error&&i.tag&&(n._adQueue=n._adQueue||[],n._adQueue[0]=i.tag,n._adXML=null),p[n._vmap?n._vmap.breakid:n._breakId]={bid:a,bidders:e};var r=a.getEventObject(_t,e,{offset:n._offSet});r.adBreakId=n._breakId,s.trigger(jt,r)})}function Z(t){var e,i,r=s.getPlaylistItem(t.index);L=q.rulesAllowAdPlayback(B)?l.isObject(r)&&r.adschedule?j.getSchedule(r,q):N:D,ft(),ut(),ht(),ct(),y=!1,A=P=null,k={},e=L.getMidRolls(),i=[],e.length&&d.foreach(e,function(t,e){"nonlinear"!==e._type&&i.push({begin:e._offSet,text:v.cuetext})}),s.setCues(i),L.reset()}function tt(t){return new Array(t+1).join((Math.random().toString(36)+"00000000000000000").slice(2,18)).slice(0,t)}function et(t){F.tick("adLoaded"+t._id);var e=rt(t);e.timeLoading=F.between("adLoading"+t._id,"adLoaded"+t._id),s.trigger(Qt,e)}function it(t,e){s.trigger("adRequest",rt(t,e)),F.tick("adLoading"+t._id)}function rt(t,e){var i=t._adQueue||{},r={},n=t.adbreakid,a=t._adTagQueue,s=t.skipoffset;if(n&&(r.adbreakid=n),a){var o=t._waterfallIndex-1;o=o<0?0:o,r.adtagid=a[o]}return null!==t._preload&&(r.preloadAds=t._preload),l.isUndefined(s)||(r.skipoffset=s),Wt(r,{id:t._id,tag:e||t._currentTag,client:"vast",adposition:t._position,offset:t._offSet,witem:t._waterfallIndex||1,wcount:i.length||1})}function nt(i){var t=o.requestFilter,e=o.trackingFilter,r=new ue(i,s,{requestFilter:t,trackingFilter:e},a);return T.push(r),r.on(Ht,function(t){var e=mt(t);gt(i,e)}),r}function at(t){for(var e=T.length;e--;)T[e]===t&&(T.splice(e,1),t.destroy())}function st(t){t.onload=null,t.onreadystatechange=null,t.onerror=null,"abort"in t&&t.abort()}function ot(t){return t===L}function dt(){V&&(st(V),V=null),ut(),ht(),ft(),ct(),s.setCues([])}function lt(t){if(t){var e=t.scheduledAd();return yt(e),"nonlinear"===e._type&&ft(),function(n){E.isWaterfalling||ct(),at(n);var e=L;return new Promise(function(t,e){var i=new Yt(n,s,S,x,v,a);i.on(Nt,e),i.on(Ut,pt),i.on(Ht,Pt);var r=i.init(R);if(!r)return i.destroy(),t();I=R,R=null,i.on(Dt,t),b.push(i)}).catch(function(t){if(ot(e))return R=R||I,vt(t).then(function(t){return ot(e)?lt(t):null})})}(t)}ft()}function ut(){for(var t=T.length;t--;){var e=T[t];T.length--,e.destroy()}}function ht(){for(var t=b.length;t--;){var e=b[t];b.length--,e.destroy()}}function pt(t){E={},Tt(t)&&(F.tick("adImpression"+t.id),t.timeLoading=F.between("adBreakStart","adImpression"+t.id)),Jt(t,0,p),s.trigger(Ut,t)}function ct(){b.length&&b[b.length-1].clearNonlinear()}function ft(){if(R||I){var t=R||I;R=null,t.destroy()}I=null}function mt(t){var e=rt(t.vloader.scheduledAd(),t.url),i=Gt(t.message,t.code,t.adErrorCode);return Wt(e,i),t.wrappedTags&&t.wrappedTags!==t.url&&(t.wrapperAdSystem&&t.wrapperAdSystem.length!==t.wrappedTags.length&&(t.wrapperAdSystem.push(t.adsystem),t.adsystem=""),e.tag=t.wrappedTags.pop(),e.wrappedTags=t.wrappedTags,e.adsystem=t.adsystem,e.wrapperAdSystem=t.wrapperAdSystem),e}function vt(t){if((i=E)._adQueue&&i._waterfallIndex<i._adQueue.length){var e=Wt({},E,{_offset:0,isWaterfalling:!0});return gt(e,t),G(e)}var i;throw t}function gt(t,e){t._errors=t._errors||[],t._errors.push(e),t._preload||yt(t)}function yt(t){t._errors&&(t._errors.forEach(Pt),t._errors=[])}function At(t){yt(E),Pt(t),ht(),0===T.length&&ft()}function kt(t){var e=rt(t),i=Gt("Ad playback blocked by an ad blocker",900,600003);return Wt(e,i)}function Pt(t){Tt(t)&&(F.tick("adError"+t.id),t.timeLoading=F.between("adBreakStart","adError"+t.id)),Wt(t,{client:_t}),C&&C.error(t.code),Jt(t,0,p),50004!==t.adErrorCode&&50901!==t.adErrorCode||!s.getAdBlock()||(O=!0),g?s.trigger(Nt,t):s.once("playlistItem",function(){s.trigger(Nt,t)},i)}function wt(){var t=window.location.href;return(t=t.match(new RegExp(/^[^/]*:\/\/\/?([^\/]*)/)))&&1<t.length?t[1]:""}function Tt(t){return void 0===t.podcount||1===t.sequence}L.isVMAP()&&U(ce(L.getVMAP(),s,wt(),v)),Wt(this,s.Events),d.addClass(t,"jw-plugin-vast"),s.on({ready:function(){var i=this;g=!0,S=new re(s,t),x=new Zt(a,r),v=j.getOptParams(o),bt.catch(function(t){dt(),s.off(null,null,i),s.playAd=d.noop;var e=Gt("Ad Error: "+t.message,null,60002);e.code=void 0,e.id=Et,e.client=_t,e.tag="",s.trigger(Nt,e)})},beforePlay:function(t){if(!_&&!y){y=!0,h.forEach(function(t){return t.timeout()});var e=(t||{}).startTime||s.getPosition();H=e||H;var i=L.getPreRoll(e);if(i||M){(null!==M||i&&"nonlinear"!==i._type)&&J();var r=L;n.then(function(){if(ot(r)){var t=L.getPreRoll(e);t&&"nonlinear"!==t._type&&Q(t)}}),e?"none"===q.startOnSeek&&(A=null):q.clearStartOnSeek(),W({startTime:e}).then(function(t){return ot(r)?lt(t):null}).catch(function(t){return ot(r)?At(t):null})}}},cast:function(t){_=!!t.active},play:function(t){i.trigger(Bt,t)},time:function(t){if(!_&&0!==t.duration){var e=L.getNextMidrollIndex(H,t.position,t.duration);if(H=t.position,null!==e){var i=L.getMidRollAtIndex(e);"nonlinear"!==i._type&&(J(),Q(i));var r=L;z(e).then(function(t){return ot(r)?lt(t):null}).catch(function(t){return ot(r)?At(t):null})}else if(o.preloadAds){var n=t.position+Lt,a=L.peek(t.position,n,t.duration);if(null!==a&&0<=a)z(a,{preload:!0}).catch(d.noop);else if(-1===a){var s=te()+1e3*(t.duration-t.position);$(s,{preload:!0}).catch(d.noop)}}}},beforeComplete:function(){if(!_){var t=L.getPostRoll();if(t){"nonlinear"!==t._type&&(J(),Q(t));var e=L;$().then(function(t){return ot(e)?lt(t):null}).catch(function(t){return ot(e)?At(t):null})}}},playlistItem:function(t){B++,H=0;var e=L;if(Z(t),q.reset(),L.isVMAP()&&!ot(e)&&U(ce(L.getVMAP(),s,wt(),v)),(n=M?M.then(K):K()).then(function(){var t=L.getAdScheduleEventObject();t.adbreaks=t.adbreaks.map(function(t){return Jt(t,0,p)}),s.trigger(Xt,t)}),o.preloadAds){var i=u.autostart;!1===i||i===Mt&&0===s.getViewable()?W(t,{preload:!0}).catch(d.noop):s.once(Vt,function(){W(t,{preload:!0}).catch(d.noop)},this)}},playlistComplete:Z,complete:function(){ct(),y=!1,A=P=null,k={}},destroyPlugin:dt},this),s.pauseAd=function(t){if(t="boolean"!=typeof t||t,b.length){var e=b[b.length-1];t?e.pause():e.play()}},s.playAd=function(t){ct();var e=void 0,i=0===v.requestTimeout?1/0:v.requestTimeout,r=0===v.creativeTimeout?1/0:v.creativeTimeout;e=Array.isArray(t)?t.slice(0):[t];var n={_id:tt(12),_adQueue:e,_waterfallIndex:0,_offset:0,_position:"api",requestTimeout:i||Ct,creativeTimeout:r||St};J(),Q(n),Promise.resolve(n).then(G).then(lt).catch(At)};var bt=pe.call(this,d,e);bt.catch(d.noop),this.destroy=dt})}();
